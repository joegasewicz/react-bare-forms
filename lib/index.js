!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports["react-bare-lib"]=e(require("react")):t["react-bare-lib"]=e(t.react)}(window,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(e,n){e.exports=t},function(t,e,n){"use strict";n.r(e),n.d(e,"createFileRef",(function(){return l})),n.d(e,"getFileFromRef",(function(){return h})),n.d(e,"areFieldsEqual",(function(){return wt})),n.d(e,"customValidator",(function(){return Vt})),n.d(e,"isChecked",(function(){return Rt})),n.d(e,"isEmailValid",(function(){return Nt})),n.d(e,"isFieldEmpty",(function(){return Tt})),n.d(e,"isFile",(function(){return Ct})),n.d(e,"isRadioChecked",(function(){return At})),n.d(e,"FormConsumer",(function(){return Ft})),n.d(e,"CheckBoxField",(function(){return ot})),n.d(e,"EmailField",(function(){return nt})),n.d(e,"FileField",(function(){return ct})),n.d(e,"Form",(function(){return xt})),n.d(e,"PasswordField",(function(){return rt})),n.d(e,"RadioField",(function(){return ut})),n.d(e,"RadioGroup",(function(){return it})),n.d(e,"SubmitButton",(function(){return pt})),n.d(e,"TextAreaField",(function(){return at})),n.d(e,"TextInputField",(function(){return et})),n.d(e,"SelectField",(function(){return st}));var r=n(0),o=n.n(r);function a(t){var e=t.results,n=t.styles;return o.a.createElement(o.a.Fragment,null,e.map((function(t){return t.messages.map((function(t,e){return o.a.createElement("div",{key:e,className:n},t)}))})))}var i,u=function(t){var e=Object(r.useContext)(jt).bare?t.className:"alert mt-2 alert-danger "+t.className;return t.isTouched?o.a.createElement(a,{results:t.results,styles:e||""}):null},s=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t,e,n){return"React Bare Forms ERROR:\n\t"+t+" - "+e+"\n\t- "+n},p=(c("Function","isFieldEmpty()","Missing argument: minLength (number)"),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(Error)),f=c("Required Props","context","You must pass in a context prop. Class components use 'state' & functional components must use useState hook. See https://joegasewicz.github.io/react-bare-forms/modules/_form_.html");function l(){return o.a.createRef()}function h(t){return t&&t.current&&Object.keys(t.current.files).length?t.current.files[0]:null}function m(t){var e=h(t);return e?{name:e.name,lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,size:e.size,type:e.type}:null}var d=function(){return(d=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function y(t,e,n){var r;return void 0===e&&(e=""),void 0===n&&(n={}),e?((r={})[e]=d(d({},t[e]),n),r):d(d({},t),n)}function v(t,e,n){return void 0===n&&(n=""),function(r,o){var a;e(d(d({},t),y(t,n,((a={})[o]=r.target.value,a))))}}function b(t,e,n){return void 0===n&&(n=""),function(r,o,a){var i,u;if(a){for(var s=d(d({},t),y(t,n,((i={})[o]=!0,i))),c=0,p=a.children;c<p.length;c++){var f=p[c];f.props.name!==o&&(s=d(d({},s),y(s,n,((u={})[f.props.name]=!1,u))))}e(s)}}}var O=function(){return(O=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},g=function(){function t(){this.GROUP_TYPES=["radioGroups"]}return t.prototype.isGroup=function(t){return this.GROUP_TYPES.includes(t)},t.prototype.create=function(){var t=this;return function(e){for(var n=Object(r.useContext)(jt),a=e.className,i=void 0===a?"btn btn-success btn-lg":a,u=(e.disabled,!1),s=(n.metadata.inputs.state,0),c=Object.keys(n.metadata);s<c.length;s++){var p=c[s],f=n.metadata[p].state;if(t.isGroup(n.metadata[p].metaType))for(var l=0,h=Object.keys(f);l<h.length;l++){E=h[l];for(var m=0,d=Object.keys(f[E]);m<d.length;m++)for(var y=d[m],v=0,b=f[E][y].validation;v<b.length;v++){b[v].isValid||(u=!0)}}else for(var g=0,_=Object.keys(f);g<_.length;g++)for(var E,j=0,P=f[E=_[g]].validation;j<P.length;j++){P[j].isValid||(u=!0)}}return o.a.createElement("button",O({},e,{disabled:u,className:i}),e.children)}},t}(),_=function(){return(_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},E=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var a=arguments[e],i=0,u=a.length;i<u;i++,o++)r[o]=a[i];return r};function j(t,e){return o.a.createElement("div",{className:"form-group"},t.labelText&&o.a.createElement("label",null,t.labelText),e,t.hint&&o.a.createElement("small",{className:"form-text text-muted"},t.hint))}var P,F=function(){function t(t,e){this.type=e,this.props=t,this.init()}return Object.defineProperty(t.prototype,"parentName",{get:function(){return this._parentName},set:function(t){this._parentName=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bare",{get:function(){return Boolean(this._bare)},set:function(t){this._bare=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._metadata},set:function(t){this._metadata=t},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.context=Object(r.useContext)(jt),this.metadata=this.context.metadata[lt(this.type)],this.metadata.init(this.props.name,this.type),this.bare=Boolean(this.context.bare)},t.prototype.getProps=function(){return this.props},t.prototype.createField=function(t){var e=this.props.validators||this.parentName?o.a.createElement(u,{isTouched:this.metadata.isFieldTouched(),results:this.validate(),name:this.props.name,type:lt(this.type),parent:this.parent}):null;return this.bare?o.a.createElement(o.a.Fragment,null,t(this.metadata.state),e):o.a.createElement(o.a.Fragment,null,this.formGroup(t(this.metadata.state)),e)},t.prototype.doValidation=function(t){var e=[];if(this.props.validators)for(var n=0,r=this.props.validators;n<r.length;n++){var o=r[n];e=E(e,[o(t,this.context)])}return e},t.prototype.validate=function(){var t=this.getFieldValue(this.props),e=this.doValidation(t);return this.metadata.update(t,e),e},t.prototype.getFieldValue=function(t){var e=ht(this.type);return this.props[e]},t.mergeDefaultCssWithProps=function(t,e,n){var r="";return n||(r+=t+" "),e&&(r+=""+e),r},t.prototype.overrideEvent=function(t,e){return _(_({},t),{target:_(_({},t.target),{value:!e})})},t.prototype.getStatePositionFromFormKey=function(){var t,e;return(null===(t=this.context)||void 0===t?void 0:t.formKey)?this.context.state[this.context.formKey]:null===(e=this.context)||void 0===e?void 0:e.state},t}(),S=function(){function t(t,e,n){this.state=t,this.updateState=e,this.metaType=n}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fieldType",{get:function(){return this._fieldType},set:function(t){this._fieldType=t},enumerable:!1,configurable:!0}),t.prototype.isFieldTouched=function(){return!!this.state[this.name]&&this.state[this.name].isTouched},t}(),x=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),w=function(){return(w=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},T=function(t){function e(e,n){var r=t.call(this,n,e)||this;return r.type=e,r.props=n,r}return x(e,t),e.prototype.create=function(){return this.createField(this.getField())},e.prototype.formGroup=function(t){return o.a.createElement("div",{className:"form-group form-check"},t,this.props.labelText&&o.a.createElement("label",{className:"form-check-label"},this.props.labelText),this.props.hint&&o.a.createElement("small",{className:"form-text text-muted"},this.props.hint))},e.prototype.getField=function(){var t=this;return function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("input",w({},t.props,{type:t.type,checked:t.getStatePositionFromFormKey()[t.props.name]||!1,onChange:function(e){return t.context.updateParentState(t.overrideEvent(e,t.getStatePositionFromFormKey()[t.props.name]),t.props.name)},name:t.props.name,className:F.mergeDefaultCssWithProps("form-check-input",t.props.className,t.context.bare)})))}},e}(F),N=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=function(){return(C=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},A=function(t){function e(e,n){var r=t.call(this,n,e)||this;return r._updateFieldValidation=function(){r.file=m(r.props.ref),void 0!==r.file&&r.validate()},r.type=e,r.props=n,r}return N(e,t),Object.defineProperty(e.prototype,"file",{get:function(){return this._file},set:function(t){this._file=t},enumerable:!1,configurable:!0}),e.prototype.create=function(){return this.createField(this.getField())},e.prototype.formGroup=function(t){return j(this.props,t)},e.prototype.getField=function(){var t=this;return function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("input",C({},t.props,{ref:t.props.ref,type:t.type,onChange:t._updateFieldValidation.bind(t),className:F.mergeDefaultCssWithProps("form-control-file",t.props.className,t.context.bare)})))}},e.prototype.getFieldValue=function(t){return this.props.ref.current?m(this.props.ref):null},e}(F),R=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),V=function(){return(V=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},I=function(t){function e(e,n){var r=t.call(this,n,e)||this;return r.type=e,r.props=n,r}return R(e,t),e.prototype.create=function(){return this.createField(this.getField())},e.prototype.formGroup=function(t){return j(this.props,t)},e.prototype.getField=function(){var t=this;return function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("input",V({},t.props,{type:t.type,value:t.getStatePositionFromFormKey()[t.props.name]||"",onChange:function(e){return t.context.updateParentState(e,t.props.name)},name:t.props.name,className:F.mergeDefaultCssWithProps("form-control",t.props.className,t.bare)})))}},e}(F),k=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(){return(K=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},G=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.defaultState={},o}return k(e,t),e.prototype.init=function(t,e){this.name=t,this.fieldType=e},e.prototype.update=function(t,e){var n,o,a,i=this;this.name in this.state?this.state[this.name]&&t!==this.state[this.name].fieldValues.currentValue&&(a=K(K({},this.state),((o={})[this.name]={name:this.name,validation:e,fieldValues:{type:ht(this.fieldType),currentValue:t},isTouched:!0},o)),Object(r.useEffect)((function(){i.updateState(a)}),[a])):(a=K(K({},this.state),((n={})[this.name]={name:this.name,validation:e,isTouched:!1,fieldValues:{type:ht(this.fieldType),currentValue:t}},n)),Object(r.useEffect)((function(){i.updateState(a)}),[a]))},e}(S),D=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),L=function(){return(L=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},M=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.defaultState={},o}return D(e,t),e.prototype.init=function(t,e){this.name=t,this.fieldType=e},e.prototype.update=function(t,e){var n,o,a,i=this;if(!(this.name in this.state))return a=L(L({},this.state),((n={})[this.name]={name:this.name,validation:e,isTouched:!1,fieldValues:{type:ht(this.fieldType),currentValue:{}}},n)),void Object(r.useEffect)((function(){i.updateState(a)}),[a]);if(this.state[this.name]){var u=this.state[this.name].fieldValues.currentValue;(null===t&&Object.keys(u).length||t&&t.name!==u.name)&&(a=L(L({},this.state),((o={})[this.name]={name:this.name,validation:e,fieldValues:{type:ht(this.fieldType),currentValue:t||{}},isTouched:!0},o)),this.updateState(a))}},e}(S),X=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),B=function(){return(B=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},U=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.defaultState={},o}return X(e,t),e.prototype.init=function(t,e){this.name=t,this.fieldType=e},e.prototype._createGroupState=function(t,e,n){var r,o;return void 0===n&&(n=!0),B(B({},this.state),((r={})[t.parentName]=B(B({},this.state[t.parentName]),((o={})[this.name]={parent:t.parentName,name:this.name,validation:e||[],isTouched:n,fieldValues:{type:ht(this.fieldType),value:t.value}},o)),r))},e.prototype.update=function(t,e){var n=this,o={};this.state[t.parentName]?(this.state[t.parentName]&&!(this.name in this.state[t.parentName])||this.state[t.parentName][this.name]&&this.state[t.parentName][this.name].fieldValues.value!==t.value)&&(o=this._createGroupState(t,e),Object(r.useEffect)((function(){n.updateState(o)}))):(o=this._createGroupState(t,e,!1),Object(r.useEffect)((function(){n.updateState(o)})))},e.prototype.isFieldTouched=function(){if(this.state&&this.parentName&&this.name&&this.state[this.parentName]){var t=this.state[this.parentName][this.name];if(t)return t.isTouched}return!1},e}(S),W=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),z=function(){return(z=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},H=function(t){function e(e,n){var o=t.call(this,n,e)||this;return o.handleOnChange=function(t,e){var n=o.overrideEvent(t,t.target.value);o.context.updateRadioGroupStateFromPassedInContext(n,o.props.name,e)},o.props=n,o.type=e,o.radioContext=Object(r.useContext)(Et),o.radioContext&&o.radioContext.parent&&(o.parentName=o.radioContext.parent.name,o.metadata.parentName=o.parentName),o}return W(e,t),Object.defineProperty(e.prototype,"parentName",{get:function(){return this.__parentName},set:function(t){this.__parentName=t},enumerable:!1,configurable:!0}),e.prototype.create=function(){return this.createField(this.getField())},e.prototype.formGroup=function(t){return o.a.createElement("div",{className:"form-group form-check"},t,this.props.labelText&&o.a.createElement("label",{className:"form-check-label"},this.props.labelText),this.props.hint&&o.a.createElement("small",{className:"form-text text-muted"},this.props.hint))},e.prototype.getField=function(){var t=this;return function(){return o.a.createElement("input",z({},t.props,{type:t.type,checked:t.getStatePositionFromFormKey()[t.props.name]||!1,name:t.props.name,onChange:function(e){return t.handleOnChange(e,t.radioContext)},className:F.mergeDefaultCssWithProps("form-check-input",t.props.className,t.context.bare)}))}},e.prototype.getFieldValue=function(t){var e,n,r,o=null===(e=this.context)||void 0===e?void 0:e.formKey;return o?(null===(n=this.context)||void 0===n?void 0:n.state[o][this.props.name])||!1:(null===(r=this.context)||void 0===r?void 0:r.state[this.props.name])||!1},e.prototype.validate=function(){var t=this.getFieldValue(this.props),e=this.doValidation(t);return this.metadata.update({value:t,parentName:this.parentName,name:this.props.name},e),e},e}(F),q=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y=function(){return(Y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Z=function(t){function e(e,n){var r=t.call(this,n,e)||this;return r.type=e,r.props=n,r}return q(e,t),e.prototype.create=function(){return this.createField(this.getField())},e.prototype.formGroup=function(t){return j(this.props,t)},e.prototype._getOptions=function(t){var e=this;return void 0===t&&(t=[]),this.props.objectKey&&this.props.objectValue?t.map((function(t,n){return o.a.createElement("option",{value:t[e.props.objectKey],key:n},t[e.props.objectValue])})):t.map((function(t,e){return o.a.createElement("option",{value:t,key:e},t)}))},e.prototype.getField=function(){var t=this,e=this.props,n=e.options,r=void 0===n?[]:n,a=(e.size,this._getOptions(r));return function(){return o.a.createElement("select",Y({},t.props,{onChange:function(e){return t.context.updateParentState(e,t.props.name)},name:t.props.name,className:F.mergeDefaultCssWithProps(t.getSelectCssName(t.props.size),t.props.className,t.context.bare)}),a||null)}},e.prototype.getSelectCssName=function(t){return"default"===t?"form-control":"form-control form-control-"+t},e}(F),$=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),J=function(){return(J=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Q=function(t){function e(e,n){var r=t.call(this,n,e)||this;return r.type=e,r.props=n,r}return $(e,t),e.prototype.create=function(){return this.createField(this.getField())},e.prototype.formGroup=function(t){return j(this.props,t)},e.prototype.getField=function(){var t=this,e=this.props.rows,n=void 0===e?5:e;return function(){return o.a.createElement("textarea",J({},t.props,{className:ft("form-control",t.props.className,t.context.bare),rows:n,value:t.getStatePositionFromFormKey()[t.props.name]||"",onChange:function(e){return t.context.updateParentState(e,t.props.name)},name:t.props.name}))}},e}(F),tt=function(){return(tt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};!function(t){t.TEXT="text",t.EMAIL="email",t.PASSWORD="password",t.TEXTAREA="textArea",t.RADIO="radio",t.CHECKBOX="checkbox",t.SELECT="select",t.FILE="file"}(P||(P={}));var et=function(t){return new I(P.TEXT,t).create()},nt=function(t){return new I(P.EMAIL,t).create()},rt=function(t){return new I(P.PASSWORD,t).create()},ot=function(t){return new T(P.CHECKBOX,t).create()},at=function(t){return new Q(P.TEXTAREA,t).create()};function it(t){var e={parent:{name:t.name},children:t.children};return o.a.createElement(Et.Provider,{value:e},t.children)}var ut=function(t){return new H(P.RADIO,t).create()},st=function(t){return new Z(P.SELECT,t).create()},ct=o.a.forwardRef((function(t,e){var n=tt(tt({},t),{ref:e});return new A(P.FILE,n).create()})),pt=(new g).create();function ft(t,e,n){var r="";return n||(r+=t+" "),e&&(r+=""+e),r}function lt(t){switch(t){case P.TEXT:case P.EMAIL:case P.PASSWORD:case P.TEXTAREA:return mt.INPUTS;case P.RADIO:return mt.RADIO_GROUPS;case P.CHECKBOX:return mt.CHECKBOXES;case P.SELECT:return mt.INPUTS;case P.FILE:return mt.FILES;default:return mt.INPUTS}}function ht(t){switch(t){case P.TEXT:case P.EMAIL:case P.PASSWORD:case P.TEXTAREA:return"value";case P.CHECKBOX:return"checked";case P.SELECT:return"value";case P.FILE:return"file";case P.RADIO:return"checked";default:return"value"}}var mt,dt=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,yt=function(){return(yt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};!function(t){t.INPUTS="inputs",t.RADIO_GROUPS="radioGroups",t.FILES="files",t.CHECKBOXES="checkboxes"}(mt||(mt={}));var vt={},bt={},Ot={},gt={},_t={bare:!1,state:{},formKey:null,debug:!1,dynamic:!0,metadata:{inputs:null,radioGroups:null,files:null,checkboxes:null}},Et=o.a.createContext(bt),jt=o.a.createContext(_t),Pt=jt.Provider,Ft=jt.Consumer,St=function(t){return function(e){e.preventDefault();var n=t.callback;"function"==typeof n&&n()&&n()}},xt=function(t){var e,n=Object(r.useState)(t.state),a=n[0],i=n[1],u=Object(r.useState)(_t),s=u[0],c=(u[1],Object(r.useState)(vt)),l=c[0],h=c[1],m=Object(r.useState)(gt),d=m[0],y=m[1],O=Object(r.useState)(Ot),g=O[0],_=O[1],E=Object(r.useState)(bt),j=E[0],P=E[1];if(t.context&&"setState"in t.context)Object(r.useEffect)((function(){t.context.setState(yt({},a))}),[a]);else{if(!t.context)throw new p(f);Object(r.useEffect)((function(){t.context(yt({},a))}),[a])}var F={bare:t.bare||s.bare,state:t.state,formKey:t.formKey,debug:t.debug||s.debug,dynamic:t.dynamic||s.dynamic,updateParentState:v(a,i,t.formKey),updateRadioGroupStateFromPassedInContext:b(a,i,t.formKey),metadata:(e={},e[mt.INPUTS]=new G(l,h,mt.INPUTS),e[mt.CHECKBOXES]=new G(d,y,mt.CHECKBOXES),e[mt.FILES]=new M(g,_,mt.FILES),e[mt.RADIO_GROUPS]=new U(j,P,mt.RADIO_GROUPS),e)};return o.a.createElement(Pt,{value:F},o.a.createElement("form",{onSubmit:St(t)},t.children))},wt=Vt((function(t,e,n){var r=function(t){if(t.formKey)return t.state[t.formKey];return t.state}(n);if(!(t in r))throw new Error("React-BareForms Error: No Field with name of "+t+" exists when calling 'areFieldsEqual' validator function.\n For more info, visit: https://joegasewicz.github.io/react-bare-forms/modules/_validators_.html#arefieldsequal");if(!r[t]||!e||e!==r[t])return["Fields do not match"]})),Tt=Vt((function(t,e,n){if(!(void 0!==e&&e.length>=t))return["Must be at least "+t+" characters"]})),Nt=Vt((function(t,e,n){if(!dt.test(String(e).toLowerCase()))return["Must be a valid email"]})),Ct=Vt((function(t,e,n){if(!e)return["Must be a file type"]})),At=Vt((function(t,e,n){if(!e)return["This option must be selected"]})),Rt=Vt((function(t,e,n){if(!1===e)return["Must be checked"]}));function Vt(t){return function(e){return void 0===e&&(e=null),function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=n[0],a=n[1],i=t(e,o,a);return Array.isArray(i)&&i.length>=1?{isValid:!1,messages:i}:{isValid:!0,messages:[]}}}}}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWFjdC1iYXJlLWxpYi93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vcmVhY3QtYmFyZS1saWIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcmVhY3QtYmFyZS1saWIvZXh0ZXJuYWwgXCJyZWFjdFwiIiwid2VicGFjazovL3JlYWN0LWJhcmUtbGliLy4vc3JjL2NvcmUvX2NvbXBvbmVudHMudHN4Iiwid2VicGFjazovL3JlYWN0LWJhcmUtbGliLy4vc3JjL2NvcmUvX2Vycm9ycy50cyIsIndlYnBhY2s6Ly9yZWFjdC1iYXJlLWxpYi8uL3NyYy91bmNyb250cm9sbGVkLnRzIiwid2VicGFjazovL3JlYWN0LWJhcmUtbGliLy4vc3JjL2NvcmUvX2ZpbGUudHMiLCJ3ZWJwYWNrOi8vcmVhY3QtYmFyZS1saWIvLi9zcmMvY29yZS9faGFuZGxlcnMudHMiLCJ3ZWJwYWNrOi8vcmVhY3QtYmFyZS1saWIvLi9zcmMvZmllbGRfY2xhc3Nlcy9fU3VibWl0QnV0dG9uLnRzeCIsIndlYnBhY2s6Ly9yZWFjdC1iYXJlLWxpYi8uL3NyYy9maWVsZF9jbGFzc2VzL19BYnN0cmFjdEZpZWxkLnRzeCIsIndlYnBhY2s6Ly9yZWFjdC1iYXJlLWxpYi8uL3NyYy9lbGVtZW50cy50c3giLCJ3ZWJwYWNrOi8vcmVhY3QtYmFyZS1saWIvLi9zcmMvY29yZS9fQWJzdHJhY3RNZXRhZGF0YS50cyIsIndlYnBhY2s6Ly9yZWFjdC1iYXJlLWxpYi8uL3NyYy9maWVsZF9jbGFzc2VzL19DaGVja0JveEZpZWxkLnRzeCIsIndlYnBhY2s6Ly9yZWFjdC1iYXJlLWxpYi8uL3NyYy9maWVsZF9jbGFzc2VzL19GaWxlRmllbGQudHN4Iiwid2VicGFjazovL3JlYWN0LWJhcmUtbGliLy4vc3JjL2ZpZWxkX2NsYXNzZXMvX0lucHV0RmllbGQudHN4Iiwid2VicGFjazovL3JlYWN0LWJhcmUtbGliLy4vc3JjL2NvcmUvX01ldGFkYXRhLnRzIiwid2VicGFjazovL3JlYWN0LWJhcmUtbGliLy4vc3JjL2NvcmUvX01ldGFkYXRhRmlsZS50c3giLCJ3ZWJwYWNrOi8vcmVhY3QtYmFyZS1saWIvLi9zcmMvY29yZS9fTWV0YWRhdGFHcm91cC50cyIsIndlYnBhY2s6Ly9yZWFjdC1iYXJlLWxpYi8uL3NyYy9maWVsZF9jbGFzc2VzL19SYWRpb0ZpZWxkLnRzeCIsIndlYnBhY2s6Ly9yZWFjdC1iYXJlLWxpYi8uL3NyYy9maWVsZF9jbGFzc2VzL19TZWxlY3RGaWVsZC50c3giLCJ3ZWJwYWNrOi8vcmVhY3QtYmFyZS1saWIvLi9zcmMvZmllbGRfY2xhc3Nlcy9fVGV4dEFyZWFGaWVsZC50c3giLCJ3ZWJwYWNrOi8vcmVhY3QtYmFyZS1saWIvLi9zcmMvY29yZS9faGVscGVycy50c3giLCJ3ZWJwYWNrOi8vcmVhY3QtYmFyZS1saWIvLi9zcmMvY29yZS9fcmVnZXgudHMiLCJ3ZWJwYWNrOi8vcmVhY3QtYmFyZS1saWIvLi9zcmMvZm9ybS50c3giLCJ3ZWJwYWNrOi8vcmVhY3QtYmFyZS1saWIvLi9zcmMvdmFsaWRhdG9ycy50cyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlZhbGlkYXRpb25SZXN1bHRzIiwicHJvcHMiLCJyZXN1bHRzIiwic3R5bGVzIiwibWFwIiwicmVzdWx0IiwibWVzc2FnZXMiLCJtc2ciLCJpbmRleCIsImNsYXNzTmFtZSIsIkZvcm1FbGVtZW50VmFsaWRhdG9ycyIsIkZvcm1Db250ZXh0IiwiYmFyZSIsImlzVG91Y2hlZCIsIl90aHJvd05ld0Vycm9yTXNnIiwidHlwZSIsIm1lc3NhZ2UiLCJFcnJvciIsIl9ub0NvbnRleHRFcnJvciIsImNyZWF0ZUZpbGVSZWYiLCJjcmVhdGVSZWYiLCJnZXRGaWxlRnJvbVJlZiIsImZpbGVSZWYiLCJjdXJyZW50Iiwia2V5cyIsImZpbGVzIiwibGVuZ3RoIiwiY3JlYXRlRmlsZU9iamVjdCIsInJlZiIsImZpbGVEYXRhIiwibGFzdE1vZGlmaWVkIiwibGFzdE1vZGlmaWVkRGF0ZSIsInNpemUiLCJfZ2V0Q29ycmVjdFN0YXRlUG9zaXRpb25Gcm9tRm9ybUtleSIsInBhcmVudFN0YXRlIiwiZm9ybUtleSIsIm9iaiIsInVwZGF0ZVBhcmVudFN0YXRlIiwic2V0UGFyZW50U3RhdGUiLCJlIiwidGFyZ2V0IiwidXBkYXRlUmFkaW9Hcm91cFN0YXRlRnJvbVBhc3NlZEluQ29udGV4dCIsInJhZGlvR3JvdXAiLCJuZXdTdGF0ZSIsImNoaWxkcmVuIiwiR1JPVVBfVFlQRVMiLCJpc0dyb3VwIiwibWV0YVR5cGUiLCJ0aGlzIiwiaW5jbHVkZXMiLCJjb250ZXh0IiwiaXNEaXNhYmxlZCIsIm1ldGFkYXRhIiwiaW5wdXRzIiwic3RhdGUiLCJtZXRhIiwibWV0YUZpZWxkIiwiZmllbGQiLCJjaGlsZEZpZWxkIiwidmFsaWRhdGlvbiIsImlzVmFsaWQiLCJkaXNhYmxlZCIsIl9nZW5lcmljRm9ybUdyb3VwIiwibGFiZWxUZXh0IiwiaGludCIsIkZJRUxEX05BTUVTIiwiaW5pdCIsIl9wYXJlbnROYW1lIiwiQm9vbGVhbiIsIl9iYXJlIiwidmFsIiwiX21ldGFkYXRhIiwiZ2V0TWV0YWRhdGFOYW1lVHlwZSIsImdldFByb3BzIiwiY3JlYXRlRmllbGQiLCJmaWVsZENhbGxiYWNrIiwiX3ZhbGlkYXRlIiwidmFsaWRhdG9ycyIsInBhcmVudE5hbWUiLCJpc0ZpZWxkVG91Y2hlZCIsInZhbGlkYXRlIiwicGFyZW50IiwiZm9ybUdyb3VwIiwiZG9WYWxpZGF0aW9uIiwiZ2V0RmllbGRWYWx1ZSIsInVwZGF0ZSIsImdldEZpZWxkVmFsdWVUeXBlIiwibWVyZ2VEZWZhdWx0Q3NzV2l0aFByb3BzIiwiZGVmYXVsdFZhbHVlIiwiY3NzUHJvcHMiLCJjc3NTdHIiLCJvdmVycmlkZUV2ZW50IiwiZ2V0U3RhdGVQb3NpdGlvbkZyb21Gb3JtS2V5IiwidXBkYXRlU3RhdGUiLCJfbmFtZSIsIl9maWVsZFR5cGUiLCJnZXRGaWVsZCIsImNoZWNrZWQiLCJvbkNoYW5nZSIsIl91cGRhdGVGaWVsZFZhbGlkYXRpb24iLCJmaWxlIiwiX2ZpbGUiLCJfIiwiZGVmYXVsdFN0YXRlIiwiZmllbGRUeXBlIiwiZmllbGRWYWx1ZXMiLCJjdXJyZW50VmFsdWUiLCJBYnN0cmFjdE1ldGFkYXRhIiwiX2NyZWF0ZUdyb3VwU3RhdGUiLCJtZXRhR3JvdXAiLCJoYW5kbGVPbkNoYW5nZSIsInJhZGlvQ29udGV4dCIsImV2ZW50IiwiUmFkaW9Hcm91cENvbnRleHQiLCJfX3BhcmVudE5hbWUiLCJfZ2V0T3B0aW9ucyIsIm9wdGlvbnMiLCJvYmplY3RLZXkiLCJvYmplY3RWYWx1ZSIsIm9wdFZhbCIsInNlbGVjdERhdGEiLCJnZXRTZWxlY3RDc3NOYW1lIiwicm93cyIsIlRleHRJbnB1dEZpZWxkIiwiVEVYVCIsIkVtYWlsRmllbGQiLCJFTUFJTCIsIlBhc3N3b3JkRmllbGQiLCJQQVNTV09SRCIsIkNIRUNLQk9YIiwiVEVYVEFSRUEiLCJSYWRpb0dyb3VwIiwiY29udGV4dFZhbHVlIiwiUHJvdmlkZXIiLCJSQURJTyIsIlNFTEVDVCIsImZvcndhcmRSZWYiLCJfcHJvcHMiLCJGSUxFIiwiTUVUQURBVEFfTkFNRVMiLCJJTlBVVFMiLCJSQURJT19HUk9VUFMiLCJDSEVDS0JPWEVTIiwiRklMRVMiLCJFTUFJTF9SRUdFWCIsIklOUFVUU19TVEFURSIsIlJBRElPX0dST1VQU19TVEFURSIsIkZJTEVTX1NUQVRFIiwiQ0hFQ0tCT1hFU19TVEFURSIsInByb3ZpZGVyQ29udGV4dCIsImRlYnVnIiwiZHluYW1pYyIsInJhZGlvR3JvdXBzIiwiY2hlY2tib3hlcyIsImNyZWF0ZUNvbnRleHQiLCJGb3JtUHJvdmlkZXIiLCJGb3JtQ29uc3VtZXIiLCJDb25zdW1lciIsImhhbmRsZVN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwiY2FsbGJhY2siLCJGb3JtIiwiaW5wdXRTdGF0ZSIsInVwZGF0ZUlucHV0U3RhdGUiLCJjaGVja2JveGVzU3RhdGUiLCJ1cGRhdGVDaGVja2JveGVzU3RhdGUiLCJmaWxlU3RhdGUiLCJ1cGRhdGVGaWxlU3RhdGUiLCJyYWRpb1N0YXRlIiwidXBkYXRlUmFkaW9TdGF0ZSIsInNldFN0YXRlIiwiX0ZpZWxkRW1wdHlFcnJvck1zZyIsIl9wcm92aWRlckNvbnRleHQiLCJvblN1Ym1pdCIsImFyZUZpZWxkc0VxdWFsIiwiY3VzdG9tVmFsaWRhdG9yIiwiZmllbGRLZXkiLCJmaWVsZFZhbHVlIiwiY29udGV4dFN0YXRlIiwiZ2V0Rm9ybVN0YXRlRnJvbUNvbnRleHQiLCJpc0ZpZWxkRW1wdHkiLCJtaW5MZW5ndGgiLCJpc0VtYWlsVmFsaWQiLCJ0ZXN0IiwiU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJpc0ZpbGUiLCJpc1JhZGlvQ2hlY2tlZCIsImlzQ2hlY2tlZCIsImFyZyIsImFyZ3MiLCJBcnJheSIsImlzQXJyYXkiXSwibWFwcGluZ3MiOiJDQUFBLFNBQTJDQSxFQUFNQyxHQUMxQixpQkFBWkMsU0FBMEMsaUJBQVhDLE9BQ3hDQSxPQUFPRCxRQUFVRCxFQUFRRyxRQUFRLFVBQ1IsbUJBQVhDLFFBQXlCQSxPQUFPQyxJQUM5Q0QsT0FBTyxDQUFDLFNBQVVKLEdBQ1EsaUJBQVpDLFFBQ2RBLFFBQVEsa0JBQW9CRCxFQUFRRyxRQUFR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QUFVIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwicmVhY3RcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wicmVhY3RcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wicmVhY3QtYmFyZS1saWJcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJyZWFjdFwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wicmVhY3QtYmFyZS1saWJcIl0gPSBmYWN0b3J5KHJvb3RbXCJyZWFjdFwiXSk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzBfXykge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fOyIsImltcG9ydCB7ZGVmYXVsdCBhcyBSZWFjdCwgdXNlQ29udGV4dH0gZnJvbSBcInJlYWN0XCI7XG5cbmltcG9ydCB7SVZhbGlkYXRpb259IGZyb20gXCIuLi92YWxpZGF0b3JzXCI7XG5pbXBvcnQge1JlYWN0RWxlbWVudH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge0Zvcm1Db250ZXh0LCBJRm9ybUNvbnRleHQsIE1FVEFEQVRBX05BTUVTfSBmcm9tIFwiLi4vZm9ybVwiO1xuXG5cblxuLyoqIEBpbnRlcm5hbCAqL1xuaW50ZXJmYWNlIElGb3JtRWxlbWVudFZhbGlkYXRvcnMge1xuICAgIHJlYWRvbmx5IHJlc3VsdHM6IEFycmF5PElWYWxpZGF0aW9uPjtcbiAgICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4gICAgcmVhZG9ubHkgdHlwZTogTUVUQURBVEFfTkFNRVM7XG4gICAgcmVhZG9ubHkgY2xhc3NOYW1lPzogc3RyaW5nO1xuICAgIHJlYWRvbmx5IHBhcmVudD86IHN0cmluZztcbiAgICByZWFkb25seSBpc1RvdWNoZWQ6IGJvb2xlYW47XG59XG4vKiogQGludGVybmFsICovXG50eXBlIFR5cGVWYWxpZGF0aW9uRWxlbWVudCA9IHsgcmVzdWx0czogQXJyYXk8SVZhbGlkYXRpb24+LCBzdHlsZXM6IHN0cmluZyB9O1xuXG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gVmFsaWRhdGlvblJlc3VsdHMocHJvcHM6IFR5cGVWYWxpZGF0aW9uRWxlbWVudCk6IFJlYWN0RWxlbWVudDxUeXBlVmFsaWRhdGlvbkVsZW1lbnQ+IHtcbiAgICBjb25zdCB7IHJlc3VsdHMsIHN0eWxlcyB9ID0gcHJvcHM7XG4gICAgcmV0dXJuICg8PntyZXN1bHRzLm1hcCgocmVzdWx0OiBJVmFsaWRhdGlvbikgPT5cbiAgICAgICAgcmVzdWx0Lm1lc3NhZ2VzLm1hcCgobXNnOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+XG4gICAgICAgICAgICA8ZGl2IGtleT17aW5kZXh9IGNsYXNzTmFtZT17c3R5bGVzfT57bXNnfTwvZGl2PlxuICAgICAgICApKX08Lz4pO1xufVxuXG4vKiogQGludGVybmFsICovXG5leHBvcnQgY29uc3QgRm9ybUVsZW1lbnRWYWxpZGF0b3JzID0gKHByb3BzOiBJRm9ybUVsZW1lbnRWYWxpZGF0b3JzKTogUmVhY3RFbGVtZW50fG51bGwgPT4ge1xuICAgIGNvbnN0IGNvbnRleHQ6IElGb3JtQ29udGV4dCA9IHVzZUNvbnRleHQoRm9ybUNvbnRleHQpO1xuICAgIGNvbnN0IHN0eWxlcyA9ICFjb250ZXh0LmJhcmUgPyBgYWxlcnQgbXQtMiBhbGVydC1kYW5nZXIgJHtwcm9wcy5jbGFzc05hbWV9YCA6IHByb3BzLmNsYXNzTmFtZTtcbiAgICBpZihwcm9wcy5pc1RvdWNoZWQpe1xuICAgICAgICByZXR1cm4gPFZhbGlkYXRpb25SZXN1bHRzIHJlc3VsdHM9e3Byb3BzLnJlc3VsdHN9IHN0eWxlcz17c3R5bGVzIHx8IFwiXCJ9IC8+XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcbiIsIi8vIEVSUk9SUyAmIEVYQ0VQVElPTiBNRVNTQUdFU1xuLy9cbi8vIFRoZSBiZWxvdyBmdW5jdGlvbnMgYXJlIG9ubHkgZGVzaWduZWQgdG8gY29uc3RydWN0IEVycm9yICYgRXhjZXB0aW9ucyBtZXNzYWdlcy5cbi8vIFRoaXMgbWFrZXMgaXQgbXVjaCBzaW1wbGVyIHRvIHRlc3QsIHdoaWxlIGxlYXZpbmcgdGhlIG9wdGlvbiB0byB0aHJvdyBlaXRoZXJcbi8vIGFuIEVycm9yIG9yIGFuIEV4Y2VwdGlvbiB0byB0aGUgY2FsbGVyLlxuXG5cbi8qKlxuICpcbiAqIEBwYXJhbSB0eXBlXG4gKiBAcGFyYW0gbmFtZVxuICogQHBhcmFtIG1lc3NhZ2VcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjb25zdCBfdGhyb3dOZXdFcnJvck1zZyA9ICh0eXBlOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nKTogc3RyaW5nID0+XG4gICAgYFJlYWN0IEJhcmUgRm9ybXMgRVJST1I6XFxuXFx0JHt0eXBlfSAtICR7bmFtZX1cXG5cXHQtICR7bWVzc2FnZX1gO1xuXG5cbmV4cG9ydCBjb25zdCBfaXNGaWVsZEVtcHR5RXJyb3JNc2cgPSBfdGhyb3dOZXdFcnJvck1zZyhcbiAgICBcIkZ1bmN0aW9uXCIsXG4gICAgXCJpc0ZpZWxkRW1wdHkoKVwiLFxuICAgIFwiTWlzc2luZyBhcmd1bWVudDogbWluTGVuZ3RoIChudW1iZXIpXCJcbik7XG5cbmV4cG9ydCBjbGFzcyBfRmllbGRFbXB0eUVycm9yTXNnIGV4dGVuZHMgRXJyb3IgeyB9XG5cbmV4cG9ydCBjb25zdCBfbm9Db250ZXh0RXJyb3IgPSBfdGhyb3dOZXdFcnJvck1zZyhcbiAgICBcIlJlcXVpcmVkIFByb3BzXCIsXG4gICAgXCJjb250ZXh0XCIsXG4gICAgXCJZb3UgbXVzdCBwYXNzIGluIGEgY29udGV4dCBwcm9wLiBDbGFzcyBjb21wb25lbnRzIHVzZSAnc3RhdGUnIFwiICtcbiAgICBcIiYgZnVuY3Rpb25hbCBjb21wb25lbnRzIG11c3QgdXNlIHVzZVN0YXRlIGhvb2suIFNlZSBodHRwczovL2pvZWdhc2V3aWN6LmdpdGh1Yi5pby9yZWFjdC1iYXJlLWZvcm1zL21vZHVsZXMvX2Zvcm1fLmh0bWxcIlxuKTtcbiIsIi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gUHVibGljIHVuY29udHJvbGxlZCBSZWFjdCBDb21wb25lbnQgSGVscGVyIGZ1bmN0aW9uc1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5pbXBvcnQge2RlZmF1bHQgYXMgUmVhY3R9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtJRmlsZX0gZnJvbSBcIi4vY29yZVwiO1xuXG4vKipcbiAqIFJCRidzIHByb3ZpZGVzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgUmVhY3QgcmVmIHRvIGFjY2VzcyB5b3VyIGZpbGUgb2JqZWN0LlxuICogVG8gdXNlLCBzaW1wbHkgYXNzaWduIHRoZSByZXR1cm5lZCByZWYgZnJvbSB0aGUgY3JlYXRlRmlsZVJlZiBmdW5jdGlvbiB0byBhXG4gKiB2YXJpYWJsZSAmIHBhc3MgdGhpcyB2YXJpYWJsZSB0byBGaWxlRmllbGQncyByZWYgcHJvcC5cbiAqIEByZXR1cm5zXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogIGltcG9ydCB7Y3JlYXRlRmlsZVJlZiwgRmlsZUZpZWxkLCBpc0ZpbGUsIGdldEZpbGVGcm9tUmVmfSBmcm9tIFwicmVhY3QtYmFyZS1mb3Jtc1wiO1xuICpcbiAqICBjb25zdCBteUZpbGVSZWYgPSBjcmVhdGVGaWxlUmVmKCk7XG4gKlxuICogIDxGaWxlRmllbGRcbiAqICAgICByZWY9e215RmlsZVJlZn1cbiAqICAgICBoaW50PVwiTXVzdCBiZSBhIGZpbGVcIlxuICogICAgIGxhYmVsVGV4dD1cIlVwbG9hZCB5b3VyIGZpbGVcIlxuICogICAgIG5hbWU9XCJteUZpbGVUZXN0XCJcbiAqICAgICB2YWxpZGF0b3JzPXtbaXNGaWxlKCldfVxuICogIC8+XG4gKlxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGaWxlUmVmKCk6IFJlYWN0LlJlZk9iamVjdDxIVE1MRm9ybUVsZW1lbnQ+IHtcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlUmVmPEhUTUxGb3JtRWxlbWVudD4oKTtcbn1cblxuLyoqXG4gKiBUbyBnZXQgYSBmaWxlIG9iamVjdCBiYWNrIGZyb20gdGhlIHJlYWN0IHJlZiwgeW91IGNhbiB1c2UgYGdldEZpbGVGcm9tUmVmYCBmdW5jdGlvbi5cbiAqIEBwYXJhbXMgVGhlIFJlYWN0IHJlZiByZXR1cm5lZCBmcm9tIHtAbGluayBjcmVhdGVGaWxlUmVmfVxuICogQHJldHVybnNcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiAgaW1wb3J0IHtjcmVhdGVGaWxlUmVmLCBGaWxlRmllbGQsIGlzRmlsZSwgZ2V0RmlsZUZyb21SZWZ9IGZyb20gXCJyZWFjdC1iYXJlLWZvcm1zXCI7XG4gKlxuICogIGNvbnN0IG15RmlsZVJlZiA9IGNyZWF0ZUZpbGVSZWYoKTtcbiAqXG4gKiAgPEZpbGVGaWVsZFxuICogICAgIHJlZj17bXlGaWxlUmVmfVxuICogICAgIGhpbnQ9XCJNdXN0IGJlIGEgZmlsZVwiXG4gKiAgICAgbGFiZWxUZXh0PVwiVXBsb2FkIHlvdXIgZmlsZVwiXG4gKiAgICAgbmFtZT1cIm15RmlsZVRlc3RcIlxuICogICAgIHZhbGlkYXRvcnM9e1tpc0ZpbGUoKV19XG4gKiAgLz5cbiAqXG4gKiAgbGV0IGZpbGVEYXRhID0ge1xuICogICAgICBteUZpbGU6IGdldEZpbGVGcm9tUmVmKG15RmlsZVJlZilcbiAqICB9O1xuICpcbiAqICAvLyBmaWxlRGF0YS5teUZpbGUgaXMgeW91ciBKYXZhc2NyaXB0IEZpbGUgb2JqZWN0LlxuICpcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZUZyb21SZWYoZmlsZVJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxGb3JtRWxlbWVudD4pOiBJRmlsZXxudWxsIHtcbiAgICBpZihmaWxlUmVmICYmIChmaWxlUmVmIGFzIGFueSkuY3VycmVudCAmJiBPYmplY3Qua2V5cygoZmlsZVJlZiBhcyBhbnkpLmN1cnJlbnQuZmlsZXMpLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gKGZpbGVSZWYgYXMgYW55KS5jdXJyZW50LmZpbGVzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbiIsImltcG9ydCB7ZGVmYXVsdCBhcyBSZWFjdH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge2dldEZpbGVGcm9tUmVmfSBmcm9tIFwiLi4vdW5jcm9udHJvbGxlZFwiO1xuXG5cbi8qKiBAaW50ZXJuYWwgKiovXG5leHBvcnQgaW50ZXJmYWNlIElGaWxlIHtcbiAgICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4gICAgcmVhZG9ubHkgbGFzdE1vZGlmaWVkOiBzdHJpbmc7XG4gICAgcmVhZG9ubHkgbGFzdE1vZGlmaWVkRGF0ZTogc3RyaW5nO1xuICAgIHJlYWRvbmx5IHNpemU6IHN0cmluZztcbiAgICByZWFkb25seSB0eXBlOiBzdHJpbmc7XG59XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGaWxlT2JqZWN0KHJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxGb3JtRWxlbWVudD4pOiBJRmlsZXxudWxsIHtcbiAgICBsZXQgZmlsZURhdGEgPSBnZXRGaWxlRnJvbVJlZihyZWYpO1xuICAgIGlmKGZpbGVEYXRhKSB7XG4gICAgICAgIGxldCB7bmFtZSwgbGFzdE1vZGlmaWVkLCBsYXN0TW9kaWZpZWREYXRlLCBzaXplLCB0eXBlfSA9IGZpbGVEYXRhO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGxhc3RNb2RpZmllZCxcbiAgICAgICAgICAgIGxhc3RNb2RpZmllZERhdGUsXG4gICAgICAgICAgICBzaXplLFxuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4iLCIvLyBIYW5kbGVyc1xuLy8gSGFuZGxlcnMgYXJlIG1ldGhvZHMgb24gdGhlIGNvbnRleHQgb2JqZWN0IHRoYXQgdXBkYXRlIHN0YXRlLlxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge0lSYWRpb0dyb3VwUGFyZW50Q29udGV4dH0gZnJvbSBcIi4uL2Zvcm1cIjtcblxuLyoqIEBpbnRlcm5hbCAqL1xudHlwZSBUeXBlSGFuZGxlciA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxhbnk+LCBuYW1lOiBzdHJpbmcpID0+IHZvaWQ7XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmZ1bmN0aW9uIF9nZXRDb3JyZWN0U3RhdGVQb3NpdGlvbkZyb21Gb3JtS2V5KHBhcmVudFN0YXRlOiBhbnksIGZvcm1LZXk6IHN0cmluZyA9IFwiXCIsIG9iajogYW55ID0ge30pOiB7W2tleTogc3RyaW5nXTogYW55fSB7XG4gICAgaWYoZm9ybUtleSkge1xuICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBbZm9ybUtleV06IHtcbiAgICAgICAgICAgICAgICAuLi5wYXJlbnRTdGF0ZVtmb3JtS2V5XSxcbiAgICAgICAgICAgICAgICAuLi5vYmosXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5wYXJlbnRTdGF0ZSxcbiAgICAgICAgICAgIC4uLm9iaixcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQYXJlbnRTdGF0ZShwYXJlbnRTdGF0ZTogYW55LCBzZXRQYXJlbnRTdGF0ZTogRnVuY3Rpb24sIGZvcm1LZXk6IHN0cmluZyA9IFwiXCIpOiBUeXBlSGFuZGxlciB7XG4gICAgcmV0dXJuIChlOiBSZWFjdC5DaGFuZ2VFdmVudDxhbnk+LCBuYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgc2V0UGFyZW50U3RhdGUoe1xuICAgICAgICAgICAgLi4ucGFyZW50U3RhdGUsXG4gICAgICAgICAgICAuLi5fZ2V0Q29ycmVjdFN0YXRlUG9zaXRpb25Gcm9tRm9ybUtleShwYXJlbnRTdGF0ZSwgZm9ybUtleSwge1tuYW1lXTogZS50YXJnZXQudmFsdWV9KSxcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cblxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJhZGlvR3JvdXBTdGF0ZUZyb21QYXNzZWRJbkNvbnRleHQocGFyZW50U3RhdGU6IGFueSwgc2V0UGFyZW50U3RhdGU6IEZ1bmN0aW9uLCBmb3JtS2V5OiBzdHJpbmcgPSBcIlwiKSB7XG4gICAgcmV0dXJuIChlOiBSZWFjdC5DaGFuZ2VFdmVudDxhbnk+LCBuYW1lOiBzdHJpbmcsIHJhZGlvR3JvdXA6IElSYWRpb0dyb3VwUGFyZW50Q29udGV4dCkgPT4ge1xuICAgICAgICBpZiAocmFkaW9Hcm91cCkge1xuICAgICAgICAgICAgbGV0IG5ld1N0YXRlID0ge1xuICAgICAgICAgICAgICAgIC4uLnBhcmVudFN0YXRlLFxuICAgICAgICAgICAgICAgICAuLi5fZ2V0Q29ycmVjdFN0YXRlUG9zaXRpb25Gcm9tRm9ybUtleShwYXJlbnRTdGF0ZSwgZm9ybUtleSwge1tuYW1lXTogdHJ1ZX0pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvcihsZXQgY2hpbGRyZW4gb2YgcmFkaW9Hcm91cC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGlmKGNoaWxkcmVuLnByb3BzLm5hbWUgIT09IG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3U3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5uZXdTdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLl9nZXRDb3JyZWN0U3RhdGVQb3NpdGlvbkZyb21Gb3JtS2V5KG5ld1N0YXRlLCBmb3JtS2V5LCB7W2NoaWxkcmVuLnByb3BzLm5hbWVdOiBmYWxzZX0pLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0UGFyZW50U3RhdGUobmV3U3RhdGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtkZWZhdWx0IGFzIFJlYWN0LCBSZWFjdEVsZW1lbnQsIHVzZUNvbnRleHR9IGZyb20gXCJyZWFjdFwiO1xuXG5cbmltcG9ydCB7Rm9ybUNvbnRleHQsIElNZXRhZGF0YSwgTUVUQURBVEFfTkFNRVN9IGZyb20gXCIuLi9mb3JtXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJ1dHRvbjxUPiB7XG4gICAgY3JlYXRlKCk6IChwcm9wczogVCkgPT4gUmVhY3RFbGVtZW50PFQ+O1xufVxuXG5hYnN0cmFjdCBjbGFzcyBCdXR0b248VD4gaW1wbGVtZW50cyBJQnV0dG9uPFQ+IHtcblxuICAgIHB1YmxpYyBhYnN0cmFjdCBjcmVhdGUoKTogKHByb3BzOiBUKSA9PiBSZWFjdEVsZW1lbnQ8VD47XG5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU3VibWl0QnV0dG9uUHJvcHMge1xuICAgIHRleHQ/OiBzdHJpbmc7XG4gICAgZGlzYWJsZWQ/OiBmYWxzZTtcbiAgICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gICAgY2hpbGRyZW4/OiBhbnk7XG59XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBTdWJtaXRCdXR0b24gaW1wbGVtZW50cyBCdXR0b248SVN1Ym1pdEJ1dHRvblByb3BzPiB7XG5cblxuICAgIHByaXZhdGUgcmVhZG9ubHkgR1JPVVBfVFlQRVMgPSBbXCJyYWRpb0dyb3Vwc1wiXTsgLy8gVE9ETy4uLlxuXG4gICAgcHJpdmF0ZSBpc0dyb3VwKG1ldGFUeXBlOiBNRVRBREFUQV9OQU1FUyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5HUk9VUF9UWVBFUy5pbmNsdWRlcyhtZXRhVHlwZSk7XG4gICAgfVxuXG5cbiAgICBjcmVhdGUoKSB7XG4gICAgICAgcmV0dXJuIChwcm9wczogSVN1Ym1pdEJ1dHRvblByb3BzKSA9PiB7XG4gICAgICAgICAgIC8vIENvbnRleHRcbiAgICAgICAgICAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoRm9ybUNvbnRleHQpO1xuXG4gICAgICAgICAgIC8vIFN0eWxlc1xuICAgICAgICAgICBjb25zdCB7IGNsYXNzTmFtZSA9IFwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1sZ1wiLCBkaXNhYmxlZCA9IHRydWV9ID0gcHJvcHM7XG5cbiAgICAgICAgICAgbGV0IGlzRGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgY29uc3QgaW5wdXRTdGF0ZSA9IGNvbnRleHQubWV0YWRhdGEuaW5wdXRzLnN0YXRlO1xuICAgICAgICAgICBmb3IgKGxldCBtZXRhIG9mIE9iamVjdC5rZXlzKGNvbnRleHQubWV0YWRhdGEpKSB7XG4gICAgICAgICAgICAgICBsZXQgbWV0YUZpZWxkID0gY29udGV4dC5tZXRhZGF0YVttZXRhIGFzIGtleW9mIElNZXRhZGF0YV0uc3RhdGU7XG4gICAgICAgICAgICAgICAvLyBJZiBhbGwgYWxsIGZpZWxkcyBhcmUgdmFsaWQgdGhlbiBwYXNzIHRocm91Z2ggdGhlIGRlZmF1bHQgaXNEaXNhYmxlZCB2YWx1ZVxuICAgICAgICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIHRoYXQgdGhlIG1lbWJlciBpcyBub3QgcGFydCBvZiBhIG1ldGFkYXRhIGdyb3VwXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuaXNHcm91cChjb250ZXh0Lm1ldGFkYXRhW21ldGEgYXMga2V5b2YgSU1ldGFkYXRhXS5tZXRhVHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBmaWVsZCBvZiBPYmplY3Qua2V5cyhtZXRhRmllbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHZhbGlkYXRpb24gb2YgbWV0YUZpZWxkW2ZpZWxkXS52YWxpZGF0aW9uKSB7IC8vIFRPRE8gRFJZXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0Rpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgZ3JvdXAgbWV0YWRhdGEgdmFsaWRhdGlvbiBjaGVja3NcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBmaWVsZCBvZiBPYmplY3Qua2V5cyhtZXRhRmllbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGNoaWxkRmllbGQgb2YgT2JqZWN0LmtleXMobWV0YUZpZWxkW2ZpZWxkXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgX2NoaWxkID0gKG1ldGFGaWVsZFtmaWVsZF0gYXMgYW55KVtjaGlsZEZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHZhbGlkYXRpb24gb2YgX2NoaWxkLnZhbGlkYXRpb24pIHsgLy8gVE9ETyBEUllcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgfVxuXG4gICAgICAgICAgIHJldHVybiAoPGJ1dHRvblxuICAgICAgICAgICAgICAgey4uLnByb3BzfVxuICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzRGlzYWJsZWR9XG4gICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgICAgICAgPntwcm9wcy5jaGlsZHJlbn08L2J1dHRvbj4pO1xuICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge2RlZmF1bHQgYXMgUmVhY3QsIFJlYWN0RWxlbWVudCwgdXNlQ29udGV4dCwgdXNlRWZmZWN0fSBmcm9tIFwicmVhY3RcIjtcblxuXG5pbXBvcnQge0ZJRUxEX05BTUVTLCBJRmllbGQsIElGaWVsZEJhc2V9IGZyb20gXCIuLi9lbGVtZW50c1wiO1xuaW1wb3J0IHtJVmFsaWRhdGlvbn0gZnJvbSBcIi4uL3ZhbGlkYXRvcnNcIjtcbmltcG9ydCB7XG4gICAgRm9ybUVsZW1lbnRWYWxpZGF0b3JzLFxuICAgIGdldEZpZWxkVmFsdWVUeXBlLFxuICAgIGdldE1ldGFkYXRhTmFtZVR5cGUsXG59IGZyb20gXCIuLi9jb3JlL2luZGV4XCI7XG5pbXBvcnQge1xuICAgIEZvcm1Db250ZXh0LFxuICAgIElGb3JtQ29udGV4dCwgVHlwZUZpZWxkVmFsdWVUeXBlcyxcbiAgICBUeXBlRm9ybU1ldGFkYXRhLFxufSBmcm9tIFwiLi4vZm9ybVwiO1xuXG5cbi8qKlxuICogQGludGVybmFsXG4gKiBAY2hpbGQgY2xhc3MgSW5wdXRGaWVsZCBjbGFzcyBoYXMgYSAqZmlsZSogbWVtYmVyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUFic3RyYWN0RmllbGQ8VD4ge1xuICAgIGNyZWF0ZTogKGNvbnRleHQ6IElGb3JtQ29udGV4dCkgPT4gUmVhY3RFbGVtZW50PFQ+O1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBwcm9wczogVDtcbiAgICBtZXRhZGF0YTogVHlwZUZvcm1NZXRhZGF0YTtcbiAgICBiYXJlOiBib29sZWFuO1xuICAgIG92ZXJyaWRlRXZlbnQ6IChlOiBhbnksIHZhbHVlOiBhbnkpID0+IFJlYWN0LkNoYW5nZUV2ZW50PGFueT47XG4gICAgZ2V0RmllbGRWYWx1ZTogKHByb3BzOiBhbnkpID0+IGFueVxuICAgIHZhbGlkYXRlOiAoKSA9PiBBcnJheTxJVmFsaWRhdGlvbj47XG4gICAgZG9WYWxpZGF0aW9uOiAodmFsdWU6IGFueSkgPT4gQXJyYXk8SVZhbGlkYXRpb24+O1xufVxuXG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gX2dlbmVyaWNGb3JtR3JvdXA8VCBleHRlbmRzIElGaWVsZEJhc2U+KHByb3BzOiBULCBjaGlsZHJlbjogYW55KSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICB7cHJvcHMubGFiZWxUZXh0ICYmIDxsYWJlbD57cHJvcHMubGFiZWxUZXh0fTwvbGFiZWw+fVxuICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgICAge3Byb3BzLmhpbnQgJiYgPHNtYWxsIGNsYXNzTmFtZT1cImZvcm0tdGV4dCB0ZXh0LW11dGVkXCI+e3Byb3BzLmhpbnR9PC9zbWFsbD59XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdEZpZWxkPFQgZXh0ZW5kcyBJRmllbGRCYXNlPiB7XG4gICAgcHVibGljIHR5cGU6IEZJRUxEX05BTUVTO1xuICAgIHB1YmxpYyBwcm9wczogVDtcbiAgICBwdWJsaWMgcGFyZW50Pzogc3RyaW5nO1xuICAgIHB1YmxpYyBfbWV0YWRhdGE/OiBUeXBlRm9ybU1ldGFkYXRhO1xuICAgIHB1YmxpYyBfYmFyZT86IGJvb2xlYW47XG4gICAgcHVibGljIGNvbnRleHQ/OiBJRm9ybUNvbnRleHQ7XG4gICAgcHJpdmF0ZSBfcGFyZW50TmFtZT86IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICAgIHB1YmxpYyBnZXQgcGFyZW50TmFtZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50TmFtZTtcbiAgICB9XG4gICAgcHVibGljIHNldCBwYXJlbnROYW1lKHZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fcGFyZW50TmFtZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3Rvcihwcm9wczogVCwgdHlwZTogRklFTERfTkFNRVMpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG5cbiAgICBnZXQgYmFyZSgpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5fYmFyZSk7XG4gICAgfVxuXG4gICAgc2V0IGJhcmUodmFsOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX2JhcmUgPSB2YWw7XG4gICAgfVxuXG4gICAgZ2V0IG1ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuX21ldGFkYXRhIGFzIFR5cGVGb3JtTWV0YWRhdGEpO1xuICAgIH1cblxuICAgIHNldCBtZXRhZGF0YSh2YWw6IFR5cGVGb3JtTWV0YWRhdGEpIHtcbiAgICAgICAgdGhpcy5fbWV0YWRhdGEgPSB2YWw7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSB1c2VDb250ZXh0PElGb3JtQ29udGV4dD4oRm9ybUNvbnRleHQpO1xuICAgICAgICAvLyB0aGlzLnN0YXRlRnJvbUZvcm1LZXkgPVxuICAgICAgICB0aGlzLm1ldGFkYXRhID0gdGhpcy5jb250ZXh0Lm1ldGFkYXRhW2dldE1ldGFkYXRhTmFtZVR5cGUodGhpcy50eXBlKV07XG4gICAgICAgIHRoaXMubWV0YWRhdGEuaW5pdCh0aGlzLnByb3BzLm5hbWUsIHRoaXMudHlwZSk7XG4gICAgICAgIHRoaXMuYmFyZSA9IEJvb2xlYW4odGhpcy5jb250ZXh0LmJhcmUpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRQcm9wcygpOiBUIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHM7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZUZpZWxkKGZpZWxkQ2FsbGJhY2s6IEZ1bmN0aW9uKSB7XG4gICAgICAgIGNvbnN0IF92YWxpZGF0ZSA9IHRoaXMucHJvcHMudmFsaWRhdG9ycyB8fCB0aGlzLnBhcmVudE5hbWUgP1xuICAgICAgICAgICAgPEZvcm1FbGVtZW50VmFsaWRhdG9yc1xuICAgICAgICAgICAgICAgIGlzVG91Y2hlZD17dGhpcy5tZXRhZGF0YS5pc0ZpZWxkVG91Y2hlZCgpfVxuICAgICAgICAgICAgICAgIHJlc3VsdHM9e3RoaXMudmFsaWRhdGUoKX1cbiAgICAgICAgICAgICAgICBuYW1lPXt0aGlzLnByb3BzLm5hbWV9XG4gICAgICAgICAgICAgICAgdHlwZT17Z2V0TWV0YWRhdGFOYW1lVHlwZSh0aGlzLnR5cGUpfVxuICAgICAgICAgICAgICAgIHBhcmVudD17dGhpcy5wYXJlbnR9XG4gICAgICAgICAgICAvPiA6XG4gICAgICAgICAgICBudWxsO1xuXG4gICAgICAgIGlmICh0aGlzLmJhcmUpIHtcbiAgICAgICAgICAgIHJldHVybiAoPD57ZmllbGRDYWxsYmFjayh0aGlzLm1ldGFkYXRhLnN0YXRlKX17X3ZhbGlkYXRlfTwvPik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gKDw+e3RoaXMuZm9ybUdyb3VwKGZpZWxkQ2FsbGJhY2sodGhpcy5tZXRhZGF0YS5zdGF0ZSkpfXtfdmFsaWRhdGV9PC8+KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgcHVibGljIGRvVmFsaWRhdGlvbih2YWx1ZTogYW55KTogQXJyYXk8SVZhbGlkYXRpb24+IHtcbiAgICAgICBsZXQgdmFsaWRhdGlvbjogQXJyYXk8SVZhbGlkYXRpb24+ID0gW107XG4gICAgICAgLy8gQ2Fycnkgb3V0IHRoZSB2YWxpZGF0aW9uXG4gICAgICAgaWYodGhpcy5wcm9wcy52YWxpZGF0b3JzKSB7XG4gICAgICAgICAgIGZvcihsZXQgdmFsaWRhdGUgb2YgdGhpcy5wcm9wcy52YWxpZGF0b3JzKSB7XG4gICAgICAgICAgICAgICB2YWxpZGF0aW9uID0gW1xuICAgICAgICAgICAgICAgICAgIC4uLnZhbGlkYXRpb24sXG4gICAgICAgICAgICAgICAgICAgdmFsaWRhdGUodmFsdWUsIHRoaXMuY29udGV4dCksXG4gICAgICAgICAgICAgICBdO1xuICAgICAgICAgICB9XG4gICAgICAgfVxuXG4gICAgICAgcmV0dXJuIHZhbGlkYXRpb247XG4gICB9XG5cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAZGVzY3JpcHRpb24gTm9ybWFsbHksIHRoaXMgbWV0aG9kIHdpbGwgYmUgY2FsbGVkIGZyb20gdGhpcyBzdXBlciBjbGFzcy4gQnV0IGl0IGlzIHB1YmxpYyBhc1xuICAgICAqIHRoZXJlIGFyZSBzb21lIGVkZ2UgY2FzZXMgd2hlcmUgaXQgbmVlZHMgdG8gYmUgY2FsbGVkIGJ5IGEgY2hpbGQgY2xhc3MgdGhhdCBleHRlbmRzIEFic3RyYWN0RmllbGQuXG4gICAgICovXG4gICAgcHVibGljIHZhbGlkYXRlKCk6IEFycmF5PElWYWxpZGF0aW9uPiB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuZ2V0RmllbGRWYWx1ZSh0aGlzLnByb3BzKTtcbiAgICAgICAgLy8gQ2Fycnkgb3V0IHRoZSB2YWxpZGF0aW9uXG4gICAgICAgIGxldCB2YWxpZGF0aW9uID0gdGhpcy5kb1ZhbGlkYXRpb24odmFsdWUpO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIG1ldGFkYXRhIHR5cGUgc3RhdGVcbiAgICAgICAgdGhpcy5tZXRhZGF0YS51cGRhdGUodmFsdWUsIHZhbGlkYXRpb24pO1xuICAgICAgICByZXR1cm4gdmFsaWRhdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gcHJvcHNcbiAgICAgKiBAZGVzY3JpcHRpb24gVGhpcyBpcyBvdmVycmlkZGVuIGluIHRoZSBSYWRpb0ZpZWxkIHN1YiBjbGFzc1xuICAgICAqL1xuICAgIHB1YmxpYyBnZXRGaWVsZFZhbHVlKHByb3BzOiBUKTogYW55IHtcbiAgICAgICAgbGV0IHR5cGUgPSBnZXRGaWVsZFZhbHVlVHlwZSh0aGlzLnR5cGUpO1xuICAgICAgICByZXR1cm4gKHRoaXMucHJvcHMgYXMgVCAmIFR5cGVGaWVsZFZhbHVlVHlwZXMpW3R5cGUgYXMgYW55XTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWJzdHJhY3QgZm9ybUdyb3VwKGNoaWxkcmVuOiBhbnkpOiBSZWFjdEVsZW1lbnQ7XG5cbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0RmllbGQoKTogKGNvbnRleHQ6IElGb3JtQ29udGV4dCkgPT4gUmVhY3RFbGVtZW50O1xuXG4gICAgc3RhdGljIG1lcmdlRGVmYXVsdENzc1dpdGhQcm9wcyhkZWZhdWx0VmFsdWU6IHN0cmluZywgY3NzUHJvcHM6IGFueSwgYmFyZTogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgICAgIGxldCBjc3NTdHIgPSBcIlwiO1xuICAgICAgICBpZiAoIWJhcmUpIHtcbiAgICAgICAgICAgIGNzc1N0ciArPSBgJHtkZWZhdWx0VmFsdWV9IGA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNzc1Byb3BzKSB7XG4gICAgICAgICAgICBjc3NTdHIgKz0gYCR7Y3NzUHJvcHN9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3NzU3RyO1xuICAgIH1cblxuICAgIHB1YmxpYyBvdmVycmlkZUV2ZW50KGU6IGFueSwgdmFsdWU6IGFueSk6IFJlYWN0LkNoYW5nZUV2ZW50PGFueT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZSxcbiAgICAgICAgICAgIHRhcmdldDoge1xuICAgICAgICAgICAgICAgIC4uLmUudGFyZ2V0LFxuICAgICAgICAgICAgICAgIHZhbHVlOiAhdmFsdWUsXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U3RhdGVQb3NpdGlvbkZyb21Gb3JtS2V5KCk6IHtba2V5OiBzdHJpbmddOiBhbnl9IHtcbiAgICAgICAgaWYgKHRoaXMuY29udGV4dD8uZm9ybUtleSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5zdGF0ZVt0aGlzLmNvbnRleHQuZm9ybUtleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dD8uc3RhdGU7XG4gICAgfVxuXG59XG4iLCJpbXBvcnQge2RlZmF1bHQgYXMgUmVhY3R9IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQge0lWYWxpZGF0b3JzfSBmcm9tIFwiLi92YWxpZGF0b3JzXCI7XG5pbXBvcnQge1xuICAgIElGb3JtLFxuICAgIElSYWRpb0dyb3VwUGFyZW50Q29udGV4dCxcbiAgICBSYWRpb0dyb3VwQ29udGV4dCxcbiAgICBUeXBlUmFkaW9Hcm91cE1ldGFkYXRhLFxufSBmcm9tIFwiLi9mb3JtXCI7XG5pbXBvcnQge1N1Ym1pdEJ1dHRvbiBhcyBfU3VibWl0QnV0dG9uLH0gZnJvbSBcIi4vZmllbGRfY2xhc3Nlcy9fU3VibWl0QnV0dG9uXCI7XG5pbXBvcnQge1xuICAgIENoZWNrQm94RmllbGQgYXMgX0NoZWNrQm94RmllbGQsXG4gICAgRmlsZUZpZWxkIGFzIF9GaWxlRmllbGQsXG4gICAgSW5wdXRGaWVsZCxcbiAgICBSYWRpb0ZpZWxkIGFzIF9SYWRpb0ZpZWxkLFxuICAgIFNlbGVjdEZpZWxkIGFzIF9TZWxlY3RGaWVsZCxcbiAgICBUZXh0QXJlYUZpZWxkIGFzIF9UZXh0QXJlYUZpZWxkLFxufSBmcm9tIFwiLi9maWVsZF9jbGFzc2VzXCI7XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBlbnVtIEZJRUxEX05BTUVTIHtcbiAgICBURVhUID0gXCJ0ZXh0XCIsXG4gICAgRU1BSUwgPSBcImVtYWlsXCIsXG4gICAgUEFTU1dPUkQgPSBcInBhc3N3b3JkXCIsXG4gICAgVEVYVEFSRUEgPSBcInRleHRBcmVhXCIsXG4gICAgUkFESU8gID0gXCJyYWRpb1wiLFxuICAgIENIRUNLQk9YID0gXCJjaGVja2JveFwiLFxuICAgIFNFTEVDVCA9IFwic2VsZWN0XCIsXG4gICAgRklMRSA9IFwiZmlsZVwiLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElGaWVsZEJhc2Uge1xuICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgZm9ybSBlbGVtZW50ICh0aGlzIHNob3VsZCBtYXRjaCB0aGUgc3RhdGUgcHJvcGVydHkgdGhhdCB5b3Ugd2FudCBiZSB1cGRhdGVkIGJ5IHRoaXMgZm9ybSBlbGVtZW50KSAqL1xuICAgIG5hbWU6IHN0cmluZztcbiAgICAvKiogSWYgKmJhcmUqIChzZWUge0BsaW5rIElGb3JtLmJhcmV9KSBpcyBzZXQgdG8gdHJ1ZSB0aGVuICpsYWJlbFRleHQqIHdpbGwgYmUgaW5zZXJ0ZWQgd2l0aGluICoqbGFiZWwqKiB0YWdzLiAqL1xuICAgIGxhYmVsVGV4dD86IHN0cmluZztcbiAgICAvKiogSWYgKmJhcmUqIChzZWUge0BsaW5rIEZvcm0uYmFyZX0pIGlzIHNldCB0byB0cnVlIHRoZW4gKmhpbnQqIHdpbGwgYmUgaW5zZXJ0ZWQgd2l0aGluICoqc21hbGwqKiB0YWdzLiAqL1xuICAgIGhpbnQ/OiBzdHJpbmc7XG4gICAgLyoqIFRoZXNlIGFyZSB0aGUge0BsaW5rIElWYWxpZGF0b3JzfSB0aGF0IHlvdSBjYW4gcGFzcyBpbiB0aGUgdmFsaWRhdGUgdGhlIGZvcm0gZWxlbWVudC4gKi9cbiAgICB2YWxpZGF0b3JzPzogSVZhbGlkYXRvcnM7XG4gICAgLyoqIEFkZCBhZGRpdGlvbmFsIGNzcyAqL1xuICAgIGNsYXNzTmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRmllbGQ8VD4gZXh0ZW5kcyBSZWFjdC5JbnB1dEhUTUxBdHRyaWJ1dGVzPFQ+IHtcbiAgICAvKiogVGhlIG5hbWUgb2YgdGhlIGZvcm0gZWxlbWVudCAodGhpcyBzaG91bGQgbWF0Y2ggdGhlIHN0YXRlIHByb3BlcnR5IHRoYXQgeW91IHdhbnQgYmUgdXBkYXRlZCBieSB0aGlzIGZvcm0gZWxlbWVudCkgKi9cbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgLyoqIElmICpiYXJlKiAoc2VlIHtAbGluayBJRm9ybS5iYXJlfSkgaXMgc2V0IHRvIHRydWUgdGhlbiAqbGFiZWxUZXh0KiB3aWxsIGJlIGluc2VydGVkIHdpdGhpbiAqKmxhYmVsKiogdGFncy4gKi9cbiAgICBsYWJlbFRleHQ/OiBzdHJpbmc7XG4gICAgLyoqIElmICpiYXJlKiAoc2VlIHtAbGluayBGb3JtLmJhcmV9KSBpcyBzZXQgdG8gdHJ1ZSB0aGVuICpoaW50KiB3aWxsIGJlIGluc2VydGVkIHdpdGhpbiAqKnNtYWxsKiogdGFncy4gKi9cbiAgICBoaW50Pzogc3RyaW5nO1xuICAgIC8qKiBUaGVzZSBhcmUgdGhlIHtAbGluayBJVmFsaWRhdG9yc30gdGhhdCB5b3UgY2FuIHBhc3MgaW4gdGhlIHZhbGlkYXRlIHRoZSBmb3JtIGVsZW1lbnQuICovXG4gICAgdmFsaWRhdG9ycz86IElWYWxpZGF0b3JzO1xuICAgIC8qKiBBZGQgYWRkaXRpb25hbCBjc3MgKi9cbiAgICBjbGFzc05hbWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRleHRJbnB1dEZpZWxkIGV4dGVuZHMgSUZpZWxkPEhUTUxJbnB1dEVsZW1lbnQ+IHtcbiAgICAvKiogVGhlIHN0YXRlIHByb3BlcnR5IHRoYXQgZ2V0cyB1cGRhdGVkIGJ5IHRoaXMgaW5wdXQgZmllbGQgKi9cbiAgICB2YWx1ZTogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElQYXNzd29yZEZpZWxkIGV4dGVuZHMgSUZpZWxkPEhUTUxJbnB1dEVsZW1lbnQ+IHtcbiAgICAvKiogVGhlIHN0YXRlIHByb3BlcnR5IHRoYXQgZ2V0cyB1cGRhdGVkIGJ5IHRoaXMgaW5wdXQgZmllbGQgKi9cbiAgICB2YWx1ZTogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElFbWFpbEZpZWxkIGV4dGVuZHMgSUZpZWxkPEhUTUxJbnB1dEVsZW1lbnQ+IHtcbiAgICAvKiogVGhlIHN0YXRlIHByb3BlcnR5IHRoYXQgZ2V0cyB1cGRhdGVkIGJ5IHRoaXMgaW5wdXQgZmllbGQgKi9cbiAgICB2YWx1ZTogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDaGVja0JveEZpZWxkIGV4dGVuZHMgSUZpZWxkPEhUTUxJbnB1dEVsZW1lbnQ+IHtcbiAgICBjaGVja2VkOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElUZXh0QXJlYUZpZWxkIGV4dGVuZHMgSUZpZWxkPEhUTUxUZXh0QXJlYUVsZW1lbnQ+IHtcbiAgICByb3dzPzogbnVtYmVyO1xuICAgIC8qKiBUaGUgc3RhdGUgcHJvcGVydHkgdGhhdCBnZXRzIHVwZGF0ZWQgYnkgdGhpcyBpbnB1dCBmaWVsZCAqL1xuICAgIHZhbHVlOiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJhZGlvRmllbGQgZXh0ZW5kcyBJRmllbGQ8SFRNTElucHV0RWxlbWVudD4ge1xuICAgIGNoZWNrZWQ6IGJvb2xlYW47XG4gICAgZGlzYWJsZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElGaWxlRmllbGQgZXh0ZW5kcyBJRmllbGQ8SFRNTElucHV0RWxlbWVudD4ge1xuICAgIHJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxGb3JtRWxlbWVudD47XG59XG5cbmV4cG9ydCB0eXBlIFR5cGVTZWxlY3RDc3NTaXplTmFtZSA9IHxcInNtXCJ8XCJkZWZhdWx0XCJ8XCJsZ1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElTZWxlY3RGaWVsZCBleHRlbmRzIE9taXQ8SUZpZWxkPEhUTUxTZWxlY3RFbGVtZW50PiwgXCJzaXplXCI+IHtcbiAgICB2YWx1ZTogYW55O1xuICAgIG9wdGlvbnM6IEFycmF5PHN0cmluZ3x7W2s6IHN0cmluZ106IGFueX0+O1xuICAgIHNpemU/OiBUeXBlU2VsZWN0Q3NzU2l6ZU5hbWU7XG4gICAgb2JqZWN0S2V5Pzogc3RyaW5nO1xuICAgIG9iamVjdFZhbHVlPzogc3RyaW5nO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gcHJvcHMge0BsaW5rIElUZXh0SW5wdXRGaWVsZH1cbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqICBpbXBvcnQge1RleHRJbnB1dEZpZWxkfSBmcm9tIFwicmVhY3QtYmFzZS1mb3Jtc1wiXG4gKlxuICogIGNvbnN0IHN0YXRlID0geyB1c2VybmFtZTogXCJcIiB9XG4gKlxuICogLy8gQSBiYXJlIGZvcm0gZXhhbXBsZSAuLi4gcmVtZW1iZXIgdG8gc2V0IHRoZSB7QGxpbmsgRm9ybS5iYXJlfSBwcm9wZXJ0eSB0byBgdHJ1ZWBcbiAqIDxUZXh0SW5wdXRGaWVsZFxuICogICAgdmFsdWU9e3N0YXRlLnVzZXJuYW1lfVxuICogICAgbmFtZT1cInVzZXJuYW1lXCJcbiAqIC8+XG4gKlxuICogLy8gRXhhbXBsZSB3aXRoIEJvb3RzdHJhcCBzdHlsaW5nIChCb290c3RyYXAgc3R5bGluZyBjb21lcyBhcyBkZWZhdWx0KVxuICpcbiAqIDxUZXh0SW5wdXRGaWVsZFxuICogICAgdmFsdWU9e3N0YXRlLnVzZXJuYW1lfVxuICogICAgbmFtZT1cInVzZXJuYW1lXCJcbiAqICAgIGhpbnQ9XCJOZWVkcyB0byBiZSBhdCBsZWFzdCA1MCBjaGFyYWN0ZXJzIGxvbmdcIlxuICogICAgbGFiZWxUZXh0PVwiVXNlcm5hbWVcIlxuICogIC8+XG4gKiBgYGBcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY29uc3QgVGV4dElucHV0RmllbGQgPSAocHJvcHM6IElUZXh0SW5wdXRGaWVsZCkgPT4ge1xuICBjb25zdCB0ZXh0SW5wdXQgPSBuZXcgSW5wdXRGaWVsZDxJVGV4dElucHV0RmllbGQ+KEZJRUxEX05BTUVTLlRFWFQsIHByb3BzKTtcbiAgcmV0dXJuIHRleHRJbnB1dC5jcmVhdGUoKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHByb3BzIHtAbGluayBJRW1haWxGaWVsZH1cbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqICBpbXBvcnQge0VtYWlsRmllbGR9IGZyb20gXCJyZWFjdC1iYXNlLWZvcm1zXCJcbiAqXG4gKiAgY29uc3Qgc3RhdGUgPSB7IGVtYWlsOiBcIlwiIH1cbiAqXG4gKiAvLyBBIGJhcmUgZm9ybSBleGFtcGxlIC4uLiByZW1lbWJlciB0byBzZXQgdGhlIHtAbGluayBGb3JtLmJhcmV9IHByb3BlcnR5IHRvIGB0cnVlYFxuICogPEVtYWlsRmllbGRcbiAqICAgIHZhbHVlPXtzdGF0ZS5lbWFpbH1cbiAqICAgIG5hbWU9XCJlbWFpbFwiXG4gKiAvPlxuICpcbiAqIC8vIEV4YW1wbGUgd2l0aCBCb290c3RyYXAgc3R5bGluZyAoQm9vdHN0cmFwIHN0eWxpbmcgY29tZXMgYXMgZGVmYXVsdClcbiAqXG4gKiA8RW1haWxGaWVsZFxuICogICAgdmFsdWU9e3N0YXRlLmVtYWlsfVxuICogICAgbmFtZT1cImVtYWlsXCJcbiAqICAgIGhpbnQ9XCJOZWVkcyB0byBiZSBhdCBsZWFzdCA1MCBjaGFyYWN0ZXJzIGxvbmdcIlxuICogICAgbGFiZWxUZXh0PVwiVXNlcm5hbWVcIlxuICogIC8+XG4gKiBgYGBcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY29uc3QgRW1haWxGaWVsZCA9IChwcm9wczogSUVtYWlsRmllbGQpID0+IHtcbiAgICBjb25zdCBlbWFpbElucHV0ID0gbmV3IElucHV0RmllbGQ8SUVtYWlsRmllbGQ+KEZJRUxEX05BTUVTLkVNQUlMLCBwcm9wcyk7XG4gICAgcmV0dXJuIGVtYWlsSW5wdXQuY3JlYXRlKCk7XG59O1xuXG4vKipcbiAqICBUaGUgYFBhc3N3b3JkRmllbGRgIHdvcmtzIHRoZSBzYW1lIGFzIHRoZSBgRW1haWxGaWVsZGAgJiBgVGV4dElucHV0RmllbGRgJ3MuXG4gKiBAcGFyYW0gcHJvcHMge0BsaW5rIElQYXNzd29yZEZpZWxkfVxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogIGltcG9ydCB7YXJlRmllbGRzRXF1YWwsIGlzRmllbGRFbXB0eSwgUGFzc3dvcmRGaWVsZH0gZnJvbSBcInJlYWN0LWJhc2UtZm9ybXNcIjtcbiAqXG4gKiAgY29uc3Qgc3RhdGUgPSB7IHBhc3N3b3JkOiBcIlwiLCBjb25maXJtUGFzc3dvcmQ6IFwiXCIgfTtcbiAqXG4gKiAvLyBBIGJhcmUgZm9ybSBleGFtcGxlIC4uLiByZW1lbWJlciB0byBzZXQgdGhlIHtAbGluayBGb3JtLmJhcmV9IHByb3BlcnR5IHRvIGB0cnVlYFxuICogPFBhc3N3b3JkRmllbGRcbiAqICAgIHZhbHVlPXtzdGF0ZS5wYXNzd29yZH1cbiAqICAgIG5hbWU9XCJ1c2VybmFtZVwiXG4gKiAgICB2YWxpZGF0b3JzPXtbaXNGaWVsZEVtcHR5KDgpXX1cbiAqIC8+XG4gKlxuICogLy8gRXhhbXBsZSB3aXRoIEJvb3RzdHJhcCBzdHlsaW5nIChCb290c3RyYXAgc3R5bGluZyBjb21lcyBhcyBkZWZhdWx0KVxuICpcbiAqIDxQYXNzd29yZEZpZWxkXG4gKiAgICB2YWx1ZT17c3RhdGUuY29uZmlybVBhc3N3b3JkfVxuICogICAgbmFtZT1cInBhc3N3b3JkXCJcbiAqICAgIGhpbnQ9XCJOZWVkcyB0byBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMgbG9uZ1wiXG4gKiAgICBsYWJlbFRleHQ9XCJQYXNzd29yZFwiXG4gKiAgLz5cbiAqICBgYGBcbiAqIEFsc28gd2UgY2FuIGNyZWF0ZSB0d28gKlBhc3N3b3JkRmllbGQqIGNvbXBvbmVudHMgdG8gY29uZmlybSBwYXNzd29yZHMgYXJlIGVxdWFsLiBQbGVhc2Ugc2VlXG4gKiB7QGxpbmsgYXJlRmllbGRzRXF1YWx9IGZvciBtb3JlIGluZm8uXG4gKiBUaGUgZmlyc3QgKlBhc3N3b3JkRmllbGQqIGhhcyBoYXMgYSAqbmFtZSogcHJvcCBvZiAqKnBhc3N3b3JkKiogJiB0aGUgc2Vjb25kICpQYXNzd29yZEZpZWxkKiBhIG5hbWVcbiAqIHByb3Agb2YgKmNvbmZpcm1QYXNzd29yZCouIFRoZW4gd2UgY2FuIGFkZCBhIHtAbGluayBhcmVGaWVsZHNFcXVhbH0gdmFsaWRhdG9yIHRvIHRoZSAqUGFzc3dvcmRGaWVsZCpcbiAqIHdpdGggdGhlICpjb25maXJtUGFzc3dvcmQqIG5hbWUgcHJvcHMgKGFsc28gbm90aWNlIGhvdyB7QGxpbmsgYXJlRmllbGRzRXF1YWx9IHRha2VzIHRoZSBmaXJzdCAqUGFzc3dvcmRGaWVsZCpcbiAqIG5hbWUgYXMgYW4gYXJndW1lbnQpLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIDxQYXNzd29yZEZpZWxkXG4gKiAgbmFtZT1cInBhc3N3b3JkXCJcbiAqICAvLyBvdGhlciBwcm9wcy4uLlxuICpcbiAqIC8+XG4gKlxuICogPFBhc3N3b3JkRmllbGRcbiAqICBuYW1lPVwiY29uZmlybVBhc3N3b3JkXCJcbiAqICAvLyBvdGhlciBwcm9wcy4uLlxuICogIHZhbGlkYXRvcnM9e1thcmVGaWVsZHNFcXVhbChcInBhc3N3b3JkXCIpXX1cbiAqIC8+XG4gKiBgYGBcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGNvbnN0IFBhc3N3b3JkRmllbGQgPSAocHJvcHM6IElQYXNzd29yZEZpZWxkKSA9PiB7XG4gIGNvbnN0IHBhc3N3b3JkSW5wdXQgPSBuZXcgSW5wdXRGaWVsZDxJUGFzc3dvcmRGaWVsZD4oRklFTERfTkFNRVMuUEFTU1dPUkQsIHByb3BzKTtcbiAgcmV0dXJuIHBhc3N3b3JkSW5wdXQuY3JlYXRlKCk7XG59O1xuXG5cblxuLyoqXG4gKiBUaGUgQ2hlY2tCb3hGaWVsZCByZXF1aXJlcyBhICpjaGVja2VkKiBwcm9wIGluc3RlYWQgb2YgYSAqdmFsdWUqIHByb3AuIFNlZVxuICoge0BsaW5rIElDaGVja0JveEZpZWxkfS5cbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIC8vIEEgYmFyZSBmb3JtIGV4YW1wbGUgLi4uIHJlbWVtYmVyIHRvIHNldCB0aGUge0BsaW5rIEZvcm0uYmFyZX0gcHJvcGVydHkgdG8gYHRydWVgXG4gKiAgaW1wb3J0IHtDaGVja0JveEZpZWxkfSBmcm9tIFwicmVhY3QtYmFzZS1mb3Jtc1wiO1xuICpcbiAqICBjb25zdCBzdGF0ZSA9IHsgcGFzc3dvcmQ6IFwiXCIsIGNvbmZpcm1QYXNzd29yZDogXCJcIiB9O1xuICpcbiAqIDxDaGVja0JveEZpZWxkXG4gKiAgIG5hbWU9XCJ0ZXJtc1wiXG4gKiAgIGNoZWNrZWQ9e3N0YXRlLnRlcm1zfVxuICogLz5cbiAqXG4gKiAvLyBFeGFtcGxlIHdpdGggQm9vdHN0cmFwIHN0eWxpbmcgKEJvb3RzdHJhcCBzdHlsaW5nIGNvbWVzIGFzIGRlZmF1bHQpXG4gKiA8Q2hlY2tCb3hGaWVsZFxuICogICBuYW1lPVwidGVybXNcIlxuICogICBjaGVja2VkPXtzdGF0ZS50ZXJtc31cbiAqICAgaGludD1cIkNsaWNrIHRvIGFncmVlXCJcbiAqICAgbGFiZWxUZXh0PVwiQWdyZWUgdG8gdGVybXMgJiBjb25kaXRpb25zXCJcbiAqIC8+XG4gKiBgYGBcbiAqIEBwYXJhbSBwcm9wcyB7QGxpbmsgSUNoZWNrQm94RmllbGR9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGNvbnN0IENoZWNrQm94RmllbGQgPSAocHJvcHM6IElDaGVja0JveEZpZWxkKSA9PiB7XG4gIGNvbnN0IGNoZWNrQm94ID0gbmV3IF9DaGVja0JveEZpZWxkPElDaGVja0JveEZpZWxkPihGSUVMRF9OQU1FUy5DSEVDS0JPWCwgcHJvcHMpO1xuICByZXR1cm4gY2hlY2tCb3guY3JlYXRlKCk7XG59O1xuXG4vKipcbiAqIFRoZSBUZXh0QXJlYUZpZWxkIHRha2VzIGluIGFuIGV4dHJhIHByb3Agb2YgKnJvdyogd2hpY2ggaXMgYSBudW1iZXIgJiBkZWNsYXJlc1xuICogdGhlIG51bWJlciBvZiByb3dzIGRpc3BsYXllZCBieSB0aGUgdGV4dGFyZWEgZWxlbWVudC4gVGhlIFRleHRBcmVhRmllbGQgYWNjZXB0c1xuICogYWxsIHRoZSB7QGxpbmsgSUZpZWxkfSBwcm9wcy5cbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqICAqICBpbXBvcnQge0NoZWNrQm94RmllbGR9IGZyb20gXCJyZWFjdC1iYXNlLWZvcm1zXCI7XG4gKlxuICogIGNvbnN0IHN0YXRlID0geyBhYm91dDogXCJcIiB9O1xuICogLy8gQSBiYXJlIGZvcm0gZXhhbXBsZSAuLi4gcmVtZW1iZXIgdG8gc2V0IHRoZSB7QGxpbmsgRm9ybS5iYXJlfSBwcm9wZXJ0eSB0byBgdHJ1ZWBcbiAqIDxUZXh0QXJlYUZpZWxkXG4gKiAgICB2YWx1ZT17c3RhdGUuYWJvdXR9XG4gKiAgICBuYW1lPVwiYWJvdXRcIlxuICogICAgdmFsaWRhdG9ycz17W2lzRmllbGRFbXB0eSgyMCldfVxuICogLz5cbiAqXG4gKiAvLyBFeGFtcGxlIHdpdGggQm9vdHN0cmFwIHN0eWxpbmcgKEJvb3RzdHJhcCBzdHlsaW5nIGNvbWVzIGFzIGRlZmF1bHQpXG4gKlxuICogPFRleHRBcmVhRmllbGRcbiAqICAgIG5hbWU9XCJhYm91dFwiXG4gKiAgICB2YWx1ZT17c3RhdGUuYWJvdXR9XG4gKiAgICBoaW50PVwiTXVzdCBiZSBhdCBsZWFzdCAyMCBjaGFyYWN0ZXJzXCJcbiAqICAgIGxhYmVsVGV4dD1cIkFib3V0IHlvdS4uLlwiXG4gKiAgICB2YWxpZGF0b3JzPXtbaXNGaWVsZEVtcHR5KDIwKV19XG4gKiAvPlxuICogYGBgXG4gKiBAcGFyYW0gcHJvcHMge0BsaW5rIElUZXh0SW5wdXRGaWVsZH1cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgY29uc3QgVGV4dEFyZWFGaWVsZCA9IChwcm9wczogSVRleHRBcmVhRmllbGQpID0+IHtcbiAgY29uc3QgdGV4dEFyZWEgPSBuZXcgX1RleHRBcmVhRmllbGQ8SVRleHRBcmVhRmllbGQ+KEZJRUxEX05BTUVTLlRFWFRBUkVBLCBwcm9wcyk7XG4gIHJldHVybiB0ZXh0QXJlYS5jcmVhdGUoKTtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJhZGlvR3JvdXBQcm9wcyB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGNoaWxkcmVuOiBhbnk7XG59XG5cbi8qKlxuICogQHByb3BzIHtAbGluayBJUmFkaW9Hcm91cFByb3BzfVxuICogQHBhcmFtIHByb3BzIFRoZSBgUmFkaW9Hcm91cGAgY29tcG9uZW50IHRha2VzIGEgc2luZ2xlIHByb3BzIG9mIGBuYW1lYCwgd2hpY2hcbiAqIG11c3QgYmUgYSB1bmlxdWUgdG8gYSBmb3JtLiBTZWUge0BsaW5rIFJhZGlvRmllbGR9LlxuICogQGNvbnN0cnVjdG9yXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogIGltcG9ydCB7Q2hlY2tCb3hGaWVsZH0gZnJvbSBcInJlYWN0LWJhc2UtZm9ybXNcIjtcbiAqXG4gKiAgY29uc3Qgc3RhdGUgPSB7IG1hbGU6IHRydWUsIGZlbWFsZTogZmFsc2UgfTtcbiAqXG4gKiAgPFJhZGlvR3JvdXAgbmFtZT1cImdyb3VwMVwiPlxuICogICAgLy8gcGxhY2UgUmFkaW9GaWVsZHMgY29tcG9uZW50cyBoZXJlLi4uXG4gKiAgPC9SYWRpb0dyb3VwPlxuICogYGBgXG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24gUmFkaW9Hcm91cChwcm9wczogSVJhZGlvR3JvdXBQcm9wcykge1xuICAgIGNvbnN0IGNvbnRleHRWYWx1ZTogSVJhZGlvR3JvdXBQYXJlbnRDb250ZXh0ID0ge3BhcmVudDoge25hbWU6IHByb3BzLm5hbWV9LCBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW59O1xuICAgIHJldHVybiA8UmFkaW9Hcm91cENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2NvbnRleHRWYWx1ZSBhcyBUeXBlUmFkaW9Hcm91cE1ldGFkYXRhfT57cHJvcHMuY2hpbGRyZW59PC9SYWRpb0dyb3VwQ29udGV4dC5Qcm92aWRlcj47XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBwcm9wcyB7QGxpbmsgSVJhZGlvRmllbGR9XG4gKiBAY29uc3RydWN0b3JcbiAqIGBSYWRpb0ZpZWxkYCBpbnB1dHMgYXJlIGRlc2lnbmVkIHRvIGJlIHVzZWQgd2l0aCB0aGUge0BsaW5rIFJhZGlvR3JvdXB9IGNvbXBvbmVudC5cbiAqICBUbyB1c2UgdGhpcyBjb21wb25lbnQsIGFkZCBvciBuZXN0IGl0IHdpdGhpbiBhIHtAbGluayBSYWRpb0dyb3VwfSBjb21wb25lbnQgYXMgY2hpbGRyZW4uXG4gKiAgSXQncyBwb3NzaWJsZSB0byBhbHNvIHVzZSB2YWxpZGF0b3JzIHdpdGggYSBSYWRpb0dyb3VwLCBhcyBzaG93biBiZWxvdzpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqICBpbXBvcnQge2lzUmFkaW9DaGVja2VkLCBSYWRpb0ZpZWxkLCBSYWRpb0dyb3VwfSBmcm9tIFwicmVhY3QtYmFzZS1mb3Jtc1wiO1xuICpcbiAqICBjb25zdCBzdGF0ZSA9IHsgbWFsZTogdHJ1ZSwgZmVtYWxlOiBmYWxzZSB9O1xuICpcbiAqICA8UmFkaW9Hcm91cCBuYW1lPVwiZ3JvdXAxXCI+XG4gKiAgICA8UmFkaW9GaWVsZFxuICogICAgICBuYW1lPVwibWFsZVwiXG4gKiAgICAgIGNoZWNrZWQ9e3N0YXRlLm1hbGV9XG4gKiAgICAgIGhpbnQ9XCJDbGljayB0byBhZ3JlZVwiXG4gKiAgICAgIGxhYmVsVGV4dD1cIkFncmVlIHRvIHRlcm1zICYgY29uZGl0aW9uc1wiXG4gKiAgICAvPlxuICpcbiAqICAgIDxSYWRpb0ZpZWxkXG4gKiAgICAgIG5hbWU9XCJmZW1hbGVcIlxuICogICAgICBjaGVja2VkPXtzdGF0ZS5mZW1hbGV9XG4gKiAgICAgIGhpbnQ9XCJDbGljayB0byBhZ3JlZVwiXG4gKiAgICAgIGxhYmVsVGV4dD1cIkFncmVlIHRvIHRlcm1zICYgY29uZGl0aW9uc1wiXG4gKiAgICAgIHZhbGlkYXRvcnM9e1tpc1JhZGlvQ2hlY2tlZCgpXX1cbiAqICAgIC8+XG4gKlxuICogIDwvUmFkaW9Hcm91cD5cbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgUmFkaW9GaWVsZCA9IChwcm9wczogSVJhZGlvRmllbGQpID0+IHtcbiAgICBjb25zdCByYWRpbyA9IG5ldyBfUmFkaW9GaWVsZChGSUVMRF9OQU1FUy5SQURJTywgcHJvcHMpO1xuICAgIHJldHVybiByYWRpby5jcmVhdGUoKTtcbn07XG5cbi8qKlxuICogQSBjb21wb25lbnQgdG8gcmVuZGVyIGEgc2VsZWN0IGZpZWxkIGVsZW1lbnQuXG4gKiBAcGFyYW0gcHJvcHMge0BsaW5rIElTZWxlY3RGaWVsZH1cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogIGltcG9ydCB7U2VsZWN0RmllbGR9IGZyb20gXCJyZWFjdC1iYXNlLWZvcm1zXCI7XG4gKlxuICogIGNvbnN0IHN0YXRlID0geyBmcnVpdENob2ljZTogXCJcIiB9O1xuICpcbiAqIDxTZWxlY3RGaWVsZFxuICogICBzaXplPVwibGdcIlxuICogICB2YWx1ZT17c3RhdGUuZnJ1aXRDaG9pY2V9XG4gKiAgIG5hbWU9XCJmcnVpdENob2ljZVwiXG4gKiAgIG9wdGlvbnM9e1tcImJhbmFuYVwiLCBcImFwcGxlXCIsIFwib3JhbmdlXCJdfVxuICogIC8+XG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIGFsc28gcGFzcyBhbiBhcnJheSBvZiBvYmplY3RzIGJ1dCB5b3UgbXVzdCB1c2UgYm90aCB0aGVcbiAqICpvYmplY3RLZXkqICYgKm9iamVjdFZhbHVlKiBwcm9wcy4gdGhlIGBvYmplY3RLZXlgIHdpbGwgdXBkYXRlIHlvdXIgc3RhdGVcbiAqIHZhbHVlICYgdGhlIGBvYmplY3RWYWx1ZWAgaXMgd2hhdCBpcyBkaXNwbGF5ZWQgdG8gdGhlIHVzZXIgYXMgYW4gb3B0aW9uLlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogLy8gVGhpcyBpcyB5b3VyIG9wdGlvbiBkYXRhXG4gKiBsZXQgc2VsZWN0RGF0YSA9IFtcbiAqICAge2lkOiAxLCBuYW1lOiBcImZpcnN0XCJ9LFxuICogICB7aWQ6IDIsIG5hbWU6IFwic2Vjb25kXCJ9LFxuICogXTtcbiAqIC8vIFRoZSBzdGF0ZSB3aGljaCB3aWxsIHJlY2VpdmUgdGhlIHVwZGF0ZVxuICogbGV0IHN0YXRlID0ge1xuICogICAgc2VsZWN0X2RhdGFfaWQ6IHVuZGVmaW5lZCBhcyBhbnksXG4gKiB9O1xuICpcbiAqIDxTZWxlY3RGaWVsZFxuICogICBzaXplPVwibGdcIlxuICogICB2YWx1ZT17c3RhdGUuc2VsZWN0X2RhdGFfaWR9XG4gKiAgIG5hbWU9XCJmcnVpdENob2ljZVwiXG4gKiAgIG9iamVjdEtleT1cImlkXCIgLy8gVmFsdWUgd2lsbCB1cGRhdGUgc3RhdGUuc2VsZWN0X2RhdGFfaWQgZS5nICoxLCAyLi4uKlxuICogICBvYmplY3RWYWx1ZT1cIm5hbWVcIiAvLyBWYWx1ZSB3aWxsIGJlIGRpc3BsYXllZCBpbiB0aGUgc2VsZWN0IGZpZWxkIGUuZyAqZmlyc3QsIHNlY29uZC4uLipcbiAqICAgb3B0aW9ucz17c2VsZWN0RGF0YX1cbiAqIC8+XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IFNlbGVjdEZpZWxkID0gKHByb3BzOiBJU2VsZWN0RmllbGQpID0+IHtcbiAgICBjb25zdCBzZWxlY3QgPSBuZXcgX1NlbGVjdEZpZWxkKEZJRUxEX05BTUVTLlNFTEVDVCwgcHJvcHMpO1xuICAgIHJldHVybiBzZWxlY3QuY3JlYXRlKCk7XG59O1xuXG4vKipcbiAqIFRoZSBTdWJtaXRCdXR0b24gb25seSByZXF1aXJlcyBhIHRleHQgc3RyaW5nIGFzIGNoaWxkcmVuIHByb3BzIChzZWUgYmVsb3cgZXhhbXBsZSkuXG4gKiBUaGUgU3VibWl0QnV0dG9uIHdpbGwgYmUgZGlzYWJsZWQgdW50aWwgYWxsIGZvcm0gZmllbGRzIGFyZSB2YWxpZGF0ZWQuXG4gKiBAcGFyYW0gcHJvcHMge0BsaW5rIElTdWJtaXRCdXR0b25Qcm9wc31cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogaW1wb3J0IHtTdWJtaXRCdXR0b259IGZyb20gXCJyZWFjdC1iYXNlLWZvcm1zXCI7XG4gKlxuICogPFN1Ym1pdEJ1dHRvbj5TdWJtaXQ8L1N1Ym1pdEJ1dHRvbj5cbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgRmlsZUZpZWxkID0gUmVhY3QuZm9yd2FyZFJlZigocHJvcHM6IElGaWxlRmllbGQsIHJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxGb3JtRWxlbWVudD58YW55KSA9PiB7XG4gICAgbGV0IF9wcm9wcyA9IHsuLi5wcm9wcywgcmVmIH07XG4gICAgY29uc3QgZmlsZSA9IG5ldyBfRmlsZUZpZWxkPElGaWxlRmllbGQ+KEZJRUxEX05BTUVTLkZJTEUsIF9wcm9wcyk7XG4gICAgcmV0dXJuIGZpbGUuY3JlYXRlKCk7XG59KTtcblxuXG5leHBvcnQgY29uc3QgU3VibWl0QnV0dG9uID0gbmV3IF9TdWJtaXRCdXR0b24oKS5jcmVhdGUoKTtcbiIsIi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBSSVZBVEUgU0VSVklDRSBDTEFTU0VTIFRPIENSRUFURSBNRVRBREFUQSBPQkpFQ1RTXG4vLyAgMS4gQWJzdHJhY3RNZXRhZGF0YVxuLy8gIDIuIE1ldGFkYXRhXG4vLyAgMy4gTWV0YWRhdGFHcm91cFxuLy9cbi8vICBJTVBPUlRBTlQ6IE9iamVjdHMgdGhhdCBpbXBsZW1lbnQgQWJzdHJhY3RNZXRhZGF0YSBETyBOT1QgY2FyZSBhYm91dCB0aGUgSUZvcm1Db250ZXh0LlxuLy8gIElNUE9SVEFOVDogTWV0YWRhdGEgb2JqZWN0cyBvbmx5IGNhcmUgYWJvdXQgdGhlaXIgb3duIElNZXRhZGF0YSBzdGF0ZSB0eXBlIChzZWUgTUVUQURBVEFfTkFNRVMpLlxuLy8gIElNUE9SVEFOVDogQ2hpbGRyZW4gb2JqZWN0cyBvZiBNZXRhZGF0YUdyb3VwIGNhcmUgYWJvdXQgdGhlaXIgcGFyZW50TmFtZSAmIHRoZWlyIG93biBzdGF0ZSB0eXBlIG9ubHkuXG5pbXBvcnQge01FVEFEQVRBX05BTUVTfSBmcm9tIFwiLi4vZm9ybVwiO1xuaW1wb3J0IHtJVmFsaWRhdGlvbn0gZnJvbSBcIi4uL3ZhbGlkYXRvcnNcIjtcbmltcG9ydCB7RklFTERfTkFNRVN9IGZyb20gXCIuLi9lbGVtZW50c1wiO1xuXG4vKiogQGludGVybmFsICoqL1xuZXhwb3J0IGludGVyZmFjZSBJTWV0YWRhdGE8VD4ge1xuICAgIHN0YXRlOiB7W2s6IHN0cmluZ106IFR9O1xuICAgIHJlYWRvbmx5IHVwZGF0ZVN0YXRlOiBGdW5jdGlvbjtcbiAgICByZWFkb25seSBtZXRhVHlwZTogc3RyaW5nO1xuICAgIGZpZWxkVHlwZTogRklFTERfTkFNRVM7XG4gICAgcGFyZW50TmFtZT86IHN0cmluZztcbiAgICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4gICAgZGVmYXVsdFN0YXRlOiB7fTtcbiAgICBpbml0OiAobmFtZTogc3RyaW5nLCBmaWVsZFR5cGU6IEZJRUxEX05BTUVTKSA9PiB2b2lkO1xuICAgIHVwZGF0ZTogKHByb3BzOiBhbnksIHZhbGlkYXRpb246IEFycmF5PElWYWxpZGF0aW9uPikgPT4gdm9pZDtcbn1cblxuLyoqIEBpbnRlcm5hbCAqKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdE1ldGFkYXRhPFQ+IGltcGxlbWVudHMgSU1ldGFkYXRhPFQ+IHtcbiAgICBwdWJsaWMgc3RhdGU6IHtbazogc3RyaW5nXTogVH07XG4gICAgcHVibGljIHJlYWRvbmx5IHVwZGF0ZVN0YXRlOiBGdW5jdGlvbjtcbiAgICBwdWJsaWMgcmVhZG9ubHkgbWV0YVR5cGU6IE1FVEFEQVRBX05BTUVTO1xuICAgIHB1YmxpYyBwYXJlbnROYW1lPzogc3RyaW5nO1xuICAgIHByaXZhdGUgX2ZpZWxkVHlwZT86IEZJRUxEX05BTUVTO1xuICAgIHByaXZhdGUgX25hbWU/OiBzdHJpbmc7XG4gICAgcHVibGljIGFic3RyYWN0IGRlZmF1bHRTdGF0ZTogVDtcblxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihzdGF0ZToge1trOiBzdHJpbmddOiBUfSwgdXBkYXRlU3RhdGU6IEZ1bmN0aW9uLCBtZXRhVHlwZTogTUVUQURBVEFfTkFNRVMpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlID0gdXBkYXRlU3RhdGU7XG4gICAgICAgIHRoaXMubWV0YVR5cGUgPSBtZXRhVHlwZTtcbiAgICB9XG5cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWUgYXMgc3RyaW5nO1xuICAgIH1cblxuICAgIHNldCBuYW1lKHZhbDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX25hbWUgPSB2YWw7XG4gICAgfVxuXG4gICAgZ2V0IGZpZWxkVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpZWxkVHlwZSBhcyBhbnk7XG4gICAgfVxuXG4gICAgc2V0IGZpZWxkVHlwZSh2YWw6IEZJRUxEX05BTUVTKSB7XG4gICAgICAgIHRoaXMuX2ZpZWxkVHlwZSA9IHZhbDtcbiAgICB9XG5cbiAgICBhYnN0cmFjdCBpbml0KG5hbWU6IHN0cmluZywgZmllbGRUeXBlOiBGSUVMRF9OQU1FUyk6IHZvaWRcblxuICAgIGFic3RyYWN0IHVwZGF0ZShwcm9wczogYW55LCB2YWxpZGF0aW9uOiBBcnJheTxJVmFsaWRhdGlvbj4pOiB2b2lkO1xuXG4gICAgcHVibGljIGlzRmllbGRUb3VjaGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZih0aGlzLnN0YXRlW3RoaXMubmFtZV0pIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5zdGF0ZVt0aGlzLm5hbWVdIGFzIGFueSkuaXNUb3VjaGVkIGFzIGJvb2xlYW4gLy8gVE9ETyBmaXggdHlwZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbn1cbiIsImltcG9ydCB7ZGVmYXVsdCBhcyBSZWFjdH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge0Fic3RyYWN0RmllbGQsIElBYnN0cmFjdEZpZWxkfSBmcm9tIFwiLi9fQWJzdHJhY3RGaWVsZFwiO1xuaW1wb3J0IHtJRm9ybUNvbnRleHR9IGZyb20gXCIuLi9mb3JtXCI7XG5pbXBvcnQge0ZJRUxEX05BTUVTLCBJRmllbGQsIElGaWVsZEJhc2V9IGZyb20gXCIuLi9lbGVtZW50c1wiO1xuXG5cblxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNsYXNzIENoZWNrQm94RmllbGQ8VCBleHRlbmRzIElGaWVsZEJhc2U+IGV4dGVuZHMgQWJzdHJhY3RGaWVsZDxUPiBpbXBsZW1lbnRzIElBYnN0cmFjdEZpZWxkPFQ+IHtcblxuICAgIGNvbnN0cnVjdG9yKHR5cGU6IEZJRUxEX05BTUVTLCBwcm9wczogVCkge1xuICAgICAgICBzdXBlcihwcm9wcywgdHlwZSk7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgICB9XG5cbiAgICBwdWJsaWMgY3JlYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVGaWVsZCh0aGlzLmdldEZpZWxkKCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBmb3JtR3JvdXAoY2hpbGRyZW46IGFueSk6IFJlYWN0LlJlYWN0RWxlbWVudCB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0tZ3JvdXAgZm9ybS1jaGVja1wiPlxuICAgICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5sYWJlbFRleHQgJiYgPGxhYmVsIGNsYXNzTmFtZT1cImZvcm0tY2hlY2stbGFiZWxcIj57dGhpcy5wcm9wcy5sYWJlbFRleHR9PC9sYWJlbD59XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMuaGludCAmJiA8c21hbGwgY2xhc3NOYW1lPVwiZm9ybS10ZXh0IHRleHQtbXV0ZWRcIj57dGhpcy5wcm9wcy5oaW50fTwvc21hbGw+fVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZpZWxkKCkge1xuICAgICAgICByZXR1cm4gKCkgPT4gKDw+ezxpbnB1dFxuICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICAgICAgICAgIHR5cGU9e3RoaXMudHlwZX1cbiAgICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLmdldFN0YXRlUG9zaXRpb25Gcm9tRm9ybUtleSgpW3RoaXMucHJvcHMubmFtZV0gfHwgZmFsc2V9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiAodGhpcy5jb250ZXh0IGFzIGFueSkudXBkYXRlUGFyZW50U3RhdGUodGhpcy5vdmVycmlkZUV2ZW50KGUsIHRoaXMuZ2V0U3RhdGVQb3NpdGlvbkZyb21Gb3JtS2V5KClbdGhpcy5wcm9wcy5uYW1lXSksIHRoaXMucHJvcHMubmFtZSl9XG4gICAgICAgICAgICAgICAgbmFtZT17dGhpcy5wcm9wcy5uYW1lfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17QWJzdHJhY3RGaWVsZC5tZXJnZURlZmF1bHRDc3NXaXRoUHJvcHMoXCJmb3JtLWNoZWNrLWlucHV0XCIsIHRoaXMucHJvcHMuY2xhc3NOYW1lLCAodGhpcy5jb250ZXh0IGFzIGFueSkuYmFyZSl9XG4gICAgICAgIC8+fTwvPik7XG4gICAgfVxufVxuXG4iLCJpbXBvcnQge2RlZmF1bHQgYXMgUmVhY3R9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtfZ2VuZXJpY0Zvcm1Hcm91cCwgQWJzdHJhY3RGaWVsZCwgSUFic3RyYWN0RmllbGR9IGZyb20gXCIuL19BYnN0cmFjdEZpZWxkXCI7XG5pbXBvcnQge0ZJRUxEX05BTUVTLCBJRmllbGQsIElGaWxlRmllbGR9IGZyb20gXCIuLi9lbGVtZW50c1wiO1xuaW1wb3J0IHtjcmVhdGVGaWxlT2JqZWN0LCBJRmlsZX0gZnJvbSBcIi4uL2NvcmUvaW5kZXhcIjtcblxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICogVGhlIG1haW4gZGlmZmVyZW5jZSBvZiB0aGlzIGNsYXNzIGlzIHRoYXQgdGhlIG9uQ2hhbmdlIGV2ZW50IGlzIHVzZWQgb25seVxuICogdG8gY2Fycnkgb3V0IHRoZSB2YWxpZGF0aW9uICh3aGljaCBpcyBzZXQgbWFudWFsbHkgaW4gRmlsZUZpZWxkLl91cGRhdGVGaWVsZFZhbGlkYXRpb24pLlxuICovXG5leHBvcnQgY2xhc3MgRmlsZUZpZWxkPFQgZXh0ZW5kcyBJRmllbGQ8SFRNTElucHV0RWxlbWVudD4+IGV4dGVuZHMgQWJzdHJhY3RGaWVsZDxUPiBpbXBsZW1lbnRzIElBYnN0cmFjdEZpZWxkPFQ+IHtcblxuICAgIF9maWxlPzogSUZpbGV8bnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKHR5cGU6IEZJRUxEX05BTUVTLCBwcm9wczogVCAmIElGaWxlRmllbGQpIHtcbiAgICAgICAgc3VwZXIocHJvcHMsIHR5cGUpO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnByb3BzID0gcHJvcHM7XG4gICAgfVxuXG4gICAgZ2V0IGZpbGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maWxlIGFzIElGaWxlfG51bGw7XG4gICAgfVxuXG4gICAgc2V0IGZpbGUodmFsOiBJRmlsZXxudWxsKSB7XG4gICAgICAgIHRoaXMuX2ZpbGUgPSB2YWw7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRmllbGQodGhpcy5nZXRGaWVsZCgpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZm9ybUdyb3VwKGNoaWxkcmVuOiBhbnkpOiBSZWFjdC5SZWFjdEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gX2dlbmVyaWNGb3JtR3JvdXA8VD4odGhpcy5wcm9wcywgY2hpbGRyZW4pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuICgpID0+IDw+ezxpbnB1dFxuICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgICAgICByZWY9eyh0aGlzLnByb3BzIGFzIGFueSkucmVmfVxuICAgICAgICAgICAgdHlwZT17dGhpcy50eXBlfVxuICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX3VwZGF0ZUZpZWxkVmFsaWRhdGlvbi5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtBYnN0cmFjdEZpZWxkLm1lcmdlRGVmYXVsdENzc1dpdGhQcm9wcyhcImZvcm0tY29udHJvbC1maWxlXCIsIHRoaXMucHJvcHMuY2xhc3NOYW1lLCAodGhpcy5jb250ZXh0IGFzIGFueSkuYmFyZSl9XG4gICAgICAgIC8+fTwvPjtcbiAgICB9XG5cbiAgICBwcml2YXRlIF91cGRhdGVGaWVsZFZhbGlkYXRpb24gPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuZmlsZSA9IGNyZWF0ZUZpbGVPYmplY3QoKHRoaXMucHJvcHMgYXMgYW55KS5yZWYpO1xuICAgICAgICBpZih0eXBlb2YgdGhpcy5maWxlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQHBhcmFtIF9cbiAgICAgKiBAZGVzY3JpcHRpb24gVGhpcyBvdmVycmlkZXMgdGhlIHNhbWUgYmVoYXZpb3VyIGluIHRoZSBwYXJlbnROYW1lIGNsYXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRGaWVsZFZhbHVlKF86IHVua25vd24pOiBhbnkge1xuICAgICAgICBpZigodGhpcy5wcm9wcyBhcyBUICYgSUZpbGVGaWVsZCkucmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVGaWxlT2JqZWN0KCh0aGlzLnByb3BzIGFzIFQgJiBJRmlsZUZpZWxkKS5yZWYpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Q29udGV4dCwgZGVmYXVsdCBhcyBSZWFjdCwgUmVhY3RFbGVtZW50fSBmcm9tIFwicmVhY3RcIjtcblxuaW1wb3J0IHtJRm9ybUNvbnRleHR9IGZyb20gXCIuLi9mb3JtXCI7XG5pbXBvcnQge0ZJRUxEX05BTUVTLCBJRmllbGR9IGZyb20gXCIuLi9lbGVtZW50c1wiO1xuaW1wb3J0IHtfZ2VuZXJpY0Zvcm1Hcm91cCwgQWJzdHJhY3RGaWVsZCwgSUFic3RyYWN0RmllbGR9IGZyb20gXCIuL19BYnN0cmFjdEZpZWxkXCI7XG5cblxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNsYXNzIElucHV0RmllbGQ8VCBleHRlbmRzIElGaWVsZDxIVE1MSW5wdXRFbGVtZW50Pj4gZXh0ZW5kcyBBYnN0cmFjdEZpZWxkPFQ+IGltcGxlbWVudHMgSUFic3RyYWN0RmllbGQ8VD4ge1xuXG4gICAgY29uc3RydWN0b3IodHlwZTogRklFTERfTkFNRVMsIHByb3BzOiBUKSB7XG4gICAgICAgIHN1cGVyKHByb3BzLCB0eXBlKTtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgIH1cblxuICAgIHB1YmxpYyBjcmVhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUZpZWxkKHRoaXMuZ2V0RmllbGQoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGZvcm1Hcm91cChjaGlsZHJlbjogYW55KTogUmVhY3RFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIF9nZW5lcmljRm9ybUdyb3VwPFQ+KHRoaXMucHJvcHMsIGNoaWxkcmVuKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RmllbGQoKSB7XG4gICAgICAgIHJldHVybiAoKSA9PiA8Pns8aW5wdXRcbiAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICAgICAgdHlwZT17dGhpcy50eXBlfVxuICAgICAgICAgICAgdmFsdWU9e3RoaXMuZ2V0U3RhdGVQb3NpdGlvbkZyb21Gb3JtS2V5KClbdGhpcy5wcm9wcy5uYW1lXXx8IFwiXCJ9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+ICh0aGlzLmNvbnRleHQgYXMgYW55KS51cGRhdGVQYXJlbnRTdGF0ZShlLCB0aGlzLnByb3BzLm5hbWUpfVxuICAgICAgICAgICAgbmFtZT17dGhpcy5wcm9wcy5uYW1lfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtBYnN0cmFjdEZpZWxkLm1lcmdlRGVmYXVsdENzc1dpdGhQcm9wcyhcImZvcm0tY29udHJvbFwiLCB0aGlzLnByb3BzLmNsYXNzTmFtZSwgdGhpcy5iYXJlKX1cbiAgICAgICAgLz59PC8+O1xuICAgIH1cbn1cbiIsImltcG9ydCB7SUZpZWxkVmFsaWRhdGlvbiwgTUVUQURBVEFfTkFNRVN9IGZyb20gXCIuLi9mb3JtXCI7XG5pbXBvcnQge0lWYWxpZGF0aW9ufSBmcm9tIFwiLi4vdmFsaWRhdG9yc1wiO1xuaW1wb3J0IHtnZXRGaWVsZFZhbHVlVHlwZX0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCB7RklFTERfTkFNRVN9IGZyb20gXCIuLi9lbGVtZW50c1wiO1xuaW1wb3J0IHtBYnN0cmFjdE1ldGFkYXRhfSBmcm9tIFwiLi9fQWJzdHJhY3RNZXRhZGF0YVwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5cblxuLyoqIEBpbnRlcm5hbCAqKi9cbmV4cG9ydCBjbGFzcyBNZXRhZGF0YTxUIGV4dGVuZHMgSUZpZWxkVmFsaWRhdGlvbj4gZXh0ZW5kcyBBYnN0cmFjdE1ldGFkYXRhPFQ+IHtcbiAgICBwdWJsaWMgZGVmYXVsdFN0YXRlID0ge30gYXMgYW55O1xuXG4gICAgY29uc3RydWN0b3Ioc3RhdGU6IHtbazogc3RyaW5nXTogVH0sIHVwZGF0ZVN0YXRlOiBGdW5jdGlvbiwgdHlwZTogTUVUQURBVEFfTkFNRVMpIHtcbiAgICAgICBzdXBlcihzdGF0ZSwgdXBkYXRlU3RhdGUsIHR5cGUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBpbml0KG5hbWU6IHN0cmluZywgZmllbGRUeXBlOiBGSUVMRF9OQU1FUyk6IHZvaWQge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmZpZWxkVHlwZSA9IGZpZWxkVHlwZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlKHZhbHVlOiBhbnksIHZhbGlkYXRpb246IEFycmF5PElWYWxpZGF0aW9uPik6IHZvaWQge1xuICAgICAgICBsZXQgc3RhdGU6IHtbazogc3RyaW5nXTogSUZpZWxkVmFsaWRhdGlvbn07XG4gICAgICAgIGlmKCEodGhpcy5uYW1lIGluIHRoaXMuc3RhdGUpKXtcbiAgICAgICAgICAgIHN0YXRlID0ge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuc3RhdGUsXG4gICAgICAgICAgICAgICAgW3RoaXMubmFtZV06IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBpc1RvdWNoZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZFZhbHVlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZ2V0RmllbGRWYWx1ZVR5cGUodGhpcy5maWVsZFR5cGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZShzdGF0ZSk7XG4gICAgICAgICAgICB9LCBbc3RhdGVdKTtcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMuc3RhdGVbdGhpcy5uYW1lXSAmJiB2YWx1ZSAhPT0gdGhpcy5zdGF0ZVt0aGlzLm5hbWVdLmZpZWxkVmFsdWVzLmN1cnJlbnRWYWx1ZSkge1xuICAgICAgICAgICAgc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5zdGF0ZSxcbiAgICAgICAgICAgICAgICBbdGhpcy5uYW1lXToge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBnZXRGaWVsZFZhbHVlVHlwZSh0aGlzLmZpZWxkVHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpc1RvdWNoZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUoc3RhdGUpO1xuICAgICAgICAgICAgfSwgW3N0YXRlXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge0lGaWVsZFZhbGlkYXRpb24sIE1FVEFEQVRBX05BTUVTfSBmcm9tIFwiLi4vZm9ybVwiO1xuaW1wb3J0IHtJVmFsaWRhdGlvbn0gZnJvbSBcIi4uL3ZhbGlkYXRvcnNcIjtcbmltcG9ydCB7Z2V0RmllbGRWYWx1ZVR5cGUsIElGaWxlfSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IHtGSUVMRF9OQU1FU30gZnJvbSBcIi4uL2VsZW1lbnRzXCI7XG5pbXBvcnQge0Fic3RyYWN0TWV0YWRhdGF9IGZyb20gXCIuL19BYnN0cmFjdE1ldGFkYXRhXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcblxuXG4vKiogQGludGVybmFsICoqL1xuZXhwb3J0IGNsYXNzIE1ldGFkYXRhRmlsZTxUIGV4dGVuZHMgSUZpZWxkVmFsaWRhdGlvbj4gZXh0ZW5kcyBBYnN0cmFjdE1ldGFkYXRhPFQ+IHtcbiAgICBwdWJsaWMgZGVmYXVsdFN0YXRlID0ge30gYXMgYW55O1xuXG4gICAgY29uc3RydWN0b3Ioc3RhdGU6IHtbazogc3RyaW5nXTogVH0sIHVwZGF0ZVN0YXRlOiBGdW5jdGlvbiwgdHlwZTogTUVUQURBVEFfTkFNRVMpIHtcbiAgICAgICAgc3VwZXIoc3RhdGUsIHVwZGF0ZVN0YXRlLCB0eXBlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW5pdChuYW1lOiBzdHJpbmcsIGZpZWxkVHlwZTogRklFTERfTkFNRVMpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5maWVsZFR5cGUgPSBmaWVsZFR5cGU7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZSh2YWx1ZTogYW55LCB2YWxpZGF0aW9uOiBBcnJheTxJVmFsaWRhdGlvbj4pOiB2b2lkIHtcbiAgICAgICAgbGV0IHN0YXRlOiB7W2s6IHN0cmluZ106IElGaWVsZFZhbGlkYXRpb259O1xuICAgICAgICBpZighKHRoaXMubmFtZSBpbiB0aGlzLnN0YXRlKSl7XG4gICAgICAgICAgICBzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLnN0YXRlLFxuICAgICAgICAgICAgICAgIFt0aGlzLm5hbWVdOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgaXNUb3VjaGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZmllbGRWYWx1ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGdldEZpZWxkVmFsdWVUeXBlKHRoaXMuZmllbGRUeXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZToge30sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUoc3RhdGUpO1xuICAgICAgICAgICAgfSwgW3N0YXRlXSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5zdGF0ZVt0aGlzLm5hbWVdKSB7XG4gICAgICAgICAgICBsZXQgY3VycmVudFZhbHVlOiBJRmlsZSA9IHRoaXMuc3RhdGVbdGhpcy5uYW1lXS5maWVsZFZhbHVlcy5jdXJyZW50VmFsdWU7XG4gICAgICAgICAgICBpZih2YWx1ZSA9PT0gbnVsbCAmJiBPYmplY3Qua2V5cyhjdXJyZW50VmFsdWUpLmxlbmd0aCB8fCB2YWx1ZSAmJiB2YWx1ZS5uYW1lICE9PSBjdXJyZW50VmFsdWUubmFtZSkge1xuICAgICAgICAgICAgICAgIHN0YXRlID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLnN0YXRlLFxuICAgICAgICAgICAgICAgICAgICBbdGhpcy5uYW1lXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZ2V0RmllbGRWYWx1ZVR5cGUodGhpcy5maWVsZFR5cGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZTogdmFsdWUgfHwge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNUb3VjaGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZShzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge0lSYWRpb0dyb3VwUGFyZW50Q29udGV4dCwgTUVUQURBVEFfTkFNRVN9IGZyb20gXCIuLi9mb3JtXCI7XG5pbXBvcnQge0lWYWxpZGF0aW9ufSBmcm9tIFwiLi4vdmFsaWRhdG9yc1wiO1xuaW1wb3J0IHtnZXRGaWVsZFZhbHVlVHlwZX0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCB7RklFTERfTkFNRVN9IGZyb20gXCIuLi9lbGVtZW50c1wiO1xuaW1wb3J0IHtBYnN0cmFjdE1ldGFkYXRhfSBmcm9tIFwiLi9fQWJzdHJhY3RNZXRhZGF0YVwiO1xuaW1wb3J0IHtUeXBlTWV0YWRhdGFSYWRpb0dyb3VwVmFsdWV9IGZyb20gXCIuLi9maWVsZF9jbGFzc2VzL19SYWRpb0ZpZWxkXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcblxuXG4vKiogQGludGVybmFsICoqL1xuZXhwb3J0IGNsYXNzIE1ldGFkYXRhR3JvdXA8VD4gZXh0ZW5kcyBBYnN0cmFjdE1ldGFkYXRhPFQ+IHtcbiAgICBwdWJsaWMgZGVmYXVsdFN0YXRlID0ge30gYXMgVDtcbiAgICBwdWJsaWMgcGFyZW50TmFtZT86IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKHN0YXRlOiB7W2s6IHN0cmluZ106IFR9LCB1cGRhdGVTdGF0ZTogRnVuY3Rpb24sIHR5cGU6IE1FVEFEQVRBX05BTUVTKSB7XG4gICAgICAgIHN1cGVyKHN0YXRlLCB1cGRhdGVTdGF0ZSwgdHlwZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGluaXQobmFtZTogc3RyaW5nLCBmaWVsZFR5cGU6IEZJRUxEX05BTUVTKTogdm9pZCB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuZmllbGRUeXBlID0gZmllbGRUeXBlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBjdXJyZW50XG4gICAgICogQHBhcmFtIHZhbGlkYXRpb25cbiAgICAgKiBAcGFyYW0gaXNUb3VjaGVkIHtCb29sZWFufSAtIFNldCB0aGlzIHRvIGZhbHNlIG9uIGluaXRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgX2NyZWF0ZUdyb3VwU3RhdGUoY3VycmVudDogVHlwZU1ldGFkYXRhUmFkaW9Hcm91cFZhbHVlLCB2YWxpZGF0aW9uOiBBcnJheTxJVmFsaWRhdGlvbj4sIGlzVG91Y2hlZD10cnVlKTogSVJhZGlvR3JvdXBQYXJlbnRDb250ZXh0IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnRoaXMuc3RhdGUsXG4gICAgICAgICAgICBbY3VycmVudC5wYXJlbnROYW1lXToge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuc3RhdGVbY3VycmVudC5wYXJlbnROYW1lXSxcbiAgICAgICAgICAgICAgICBbdGhpcy5uYW1lXToge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN1cnJlbnQucGFyZW50TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uIHx8IFtdLFxuICAgICAgICAgICAgICAgICAgICBpc1RvdWNoZWQsXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBnZXRGaWVsZFZhbHVlVHlwZSh0aGlzLmZpZWxkVHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY3VycmVudC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKiogQGludGVybmFsICovXG4gICAgcHVibGljIHVwZGF0ZShjdXJyZW50OiBUeXBlTWV0YWRhdGFSYWRpb0dyb3VwVmFsdWUsIHZhbGlkYXRpb246IEFycmF5PElWYWxpZGF0aW9uPik6IHZvaWQge1xuICAgICAgICBsZXQgc3RhdGUgPSB7fTtcbiAgICAgICAgaWYoIXRoaXMuc3RhdGVbY3VycmVudC5wYXJlbnROYW1lXSkge1xuICAgICAgICAgICAgc3RhdGUgPSB0aGlzLl9jcmVhdGVHcm91cFN0YXRlKGN1cnJlbnQsIHZhbGlkYXRpb24sIGZhbHNlKTtcbiAgICAgICAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZShzdGF0ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMuc3RhdGVbY3VycmVudC5wYXJlbnROYW1lXSAmJiAhKHRoaXMubmFtZSBpbiB0aGlzLnN0YXRlW2N1cnJlbnQucGFyZW50TmFtZV0pKSB7XG4gICAgICAgICAgICAvLyBGb3IgcmVhZGFiaWxpdHkgLSBrZWVwIHRoaXMgY2xhdXNlICYgdGhlIG5leHQsIHNlcGFyYXRlIHBsZWFzZVxuICAgICAgICAgICAgc3RhdGUgPSB0aGlzLl9jcmVhdGVHcm91cFN0YXRlKGN1cnJlbnQsIHZhbGlkYXRpb24pO1xuICAgICAgICAgICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlKHN0YXRlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYoKHRoaXMuc3RhdGVbY3VycmVudC5wYXJlbnROYW1lXSBhcyBhbnkpW3RoaXMubmFtZV0gJiZcbiAgICAgICAgICAgICh0aGlzLnN0YXRlW2N1cnJlbnQucGFyZW50TmFtZV0gYXMgYW55KVt0aGlzLm5hbWVdLmZpZWxkVmFsdWVzLnZhbHVlICE9PSBjdXJyZW50LnZhbHVlKSB7XG4gICAgICAgICAgICBzdGF0ZSA9IHRoaXMuX2NyZWF0ZUdyb3VwU3RhdGUoY3VycmVudCwgdmFsaWRhdGlvbik7XG4gICAgICAgICAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUoc3RhdGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaXNGaWVsZFRvdWNoZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBwYXJlbnRTdGF0ZSA9ICh0aGlzLnN0YXRlKTtcbiAgICAgICAgaWYocGFyZW50U3RhdGUpIHtcbiAgICAgICAgICAgIGlmKHRoaXMucGFyZW50TmFtZSAmJiB0aGlzLm5hbWUgJiYgdGhpcy5zdGF0ZVt0aGlzLnBhcmVudE5hbWVdKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1ldGFHcm91cCA9ICh0aGlzLnN0YXRlW3RoaXMucGFyZW50TmFtZV0gYXMgYW55KVt0aGlzLm5hbWUgYXMga2V5b2YgVF07XG4gICAgICAgICAgICAgICAgaWYobWV0YUdyb3VwKSByZXR1cm4gbWV0YUdyb3VwLmlzVG91Y2hlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtkZWZhdWx0IGFzIFJlYWN0LCB1c2VDb250ZXh0fSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7QWJzdHJhY3RGaWVsZCwgSUFic3RyYWN0RmllbGR9IGZyb20gXCIuL19BYnN0cmFjdEZpZWxkXCI7XG5pbXBvcnQge0ZJRUxEX05BTUVTLCBJUmFkaW9GaWVsZH0gZnJvbSBcIi4uL2VsZW1lbnRzXCI7XG5pbXBvcnQge0lGb3JtQ29udGV4dCwgSVJhZGlvR3JvdXBQYXJlbnRDb250ZXh0LCBSYWRpb0dyb3VwQ29udGV4dCwgVHlwZUZpZWxkVmFsdWVUeXBlc30gZnJvbSBcIi4uL2Zvcm1cIjtcbmltcG9ydCB7SVZhbGlkYXRpb259IGZyb20gXCIuLi92YWxpZGF0b3JzXCI7XG5pbXBvcnQge2dldEZpZWxkVmFsdWVUeXBlfSBmcm9tIFwiLi4vY29yZVwiO1xuXG5leHBvcnQgdHlwZSBUeXBlTWV0YWRhdGFSYWRpb0dyb3VwVmFsdWUgPSB7IHZhbHVlOiBib29sZWFuLCBwYXJlbnROYW1lOiBzdHJpbmcsIG5hbWU6IHN0cmluZyB9O1xuXG4vKiogQGludGVybmFsICovXG5leHBvcnQgY2xhc3MgUmFkaW9GaWVsZDxUIGV4dGVuZHMgSVJhZGlvRmllbGQ+IGV4dGVuZHMgQWJzdHJhY3RGaWVsZDxUPiBpbXBsZW1lbnRzIElBYnN0cmFjdEZpZWxkPFQ+IHtcbiAgICBwcml2YXRlIF9fcGFyZW50TmFtZT86IHN0cmluZztcbiAgICBwdWJsaWMgcHJvcHM6IGFueTtcbiAgICBwdWJsaWMgdHlwZTogYW55O1xuICAgIHB1YmxpYyByYWRpb0NvbnRleHQ/OiBJUmFkaW9Hcm91cFBhcmVudENvbnRleHQ7IC8vIFRPRE8gaWYgbW9yZSBncm91cHMgYXJlIHJlcXVpcmVkIHRoZW4gbWFrZSB0aGlzIGFic3RyYWN0XG5cbiAgICBjb25zdHJ1Y3Rvcih0eXBlOiBGSUVMRF9OQU1FUywgcHJvcHM6IFQpIHtcbiAgICAgICAgc3VwZXIocHJvcHMsIHR5cGUpO1xuICAgICAgICB0aGlzLnByb3BzID0gcHJvcHM7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMucmFkaW9Db250ZXh0ID0gdXNlQ29udGV4dChSYWRpb0dyb3VwQ29udGV4dCkgYXMgYW55O1xuICAgICAgICBpZih0aGlzLnJhZGlvQ29udGV4dCAmJiB0aGlzLnJhZGlvQ29udGV4dC5wYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50TmFtZSA9IHRoaXMucmFkaW9Db250ZXh0LnBhcmVudC5uYW1lO1xuICAgICAgICAgICAgdGhpcy5tZXRhZGF0YS5wYXJlbnROYW1lID0gdGhpcy5wYXJlbnROYW1lO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHBhcmVudE5hbWUoKTogc3RyaW5nfHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9fcGFyZW50TmFtZTtcbiAgICB9XG5cbiAgICBzZXQgcGFyZW50TmFtZSh2YWw6IHN0cmluZ3x1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fX3BhcmVudE5hbWUgPSB2YWw7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRmllbGQodGhpcy5nZXRGaWVsZCgpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZm9ybUdyb3VwKGNoaWxkcmVuOiBhbnkpOiBSZWFjdC5SZWFjdEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWdyb3VwIGZvcm0tY2hlY2tcIj5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMubGFiZWxUZXh0ICYmIDxsYWJlbCBjbGFzc05hbWU9XCJmb3JtLWNoZWNrLWxhYmVsXCI+e3RoaXMucHJvcHMubGFiZWxUZXh0fTwvbGFiZWw+fVxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmhpbnQgJiYgPHNtYWxsIGNsYXNzTmFtZT1cImZvcm0tdGV4dCB0ZXh0LW11dGVkXCI+e3RoaXMucHJvcHMuaGludH08L3NtYWxsPn1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiA8aW5wdXRcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgICAgICAgICB0eXBlPXt0aGlzLnR5cGV9XG4gICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5nZXRTdGF0ZVBvc2l0aW9uRnJvbUZvcm1LZXkoKVt0aGlzLnByb3BzLm5hbWVdIHx8IGZhbHNlfVxuICAgICAgICAgICAgICAgIG5hbWU9e3RoaXMucHJvcHMubmFtZX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB0aGlzLmhhbmRsZU9uQ2hhbmdlKGUsICh0aGlzLnJhZGlvQ29udGV4dCBhcyBJUmFkaW9Hcm91cFBhcmVudENvbnRleHQpKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e0Fic3RyYWN0RmllbGQubWVyZ2VEZWZhdWx0Q3NzV2l0aFByb3BzKFwiZm9ybS1jaGVjay1pbnB1dFwiLCB0aGlzLnByb3BzLmNsYXNzTmFtZSwgKHRoaXMuY29udGV4dCBhcyBhbnkpLmJhcmUpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZU9uQ2hhbmdlID0gKGU6IFJlYWN0LkNoYW5nZUV2ZW50PGFueT4sIHJhZGlvQ29udGV4dDogSVJhZGlvR3JvdXBQYXJlbnRDb250ZXh0KSA9PiB7XG4gICAgICAgIGxldCBldmVudDogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTEZvcm1FbGVtZW50PiA9IHRoaXMub3ZlcnJpZGVFdmVudChlLCBlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICh0aGlzLmNvbnRleHQgYXMgYW55KS51cGRhdGVSYWRpb0dyb3VwU3RhdGVGcm9tUGFzc2VkSW5Db250ZXh0KGV2ZW50LCB0aGlzLnByb3BzLm5hbWUsIHJhZGlvQ29udGV4dCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBwcm9wc1xuICAgICAqIEBkZXNjcmlwdGlvbiBUaGlzIGlzIHNvIHRoYXQgYm90aCBjbGFzcyBjb21wb25lbnRzICYgaG9vayBiYXNlZFxuICAgICAqIGNvbXBvbmVudHMgZ2V0IHVwZGF0ZWQuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vam9lZ2FzZXdpY3ovcmVhY3QtYmFyZS1mb3Jtcy9pc3N1ZXMvMTAwLlxuICAgICAqIFRoZSBBYnN0cmFjdEZpZWxkJ3MgZ2V0RmllbGRWYWx1ZSBpbXBsZW1lbnRhdGlvbiBkaWZmZXJzIGJlY2F1c2UgdGhlIHZhbHVlIG9mXG4gICAgICogdGhlIGZvcm0gZWxlbWVudCBjYW4gYmUgZGVyaXZlZCBkaXJlY3RseSBmcm9tIHByb3BzLlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRGaWVsZFZhbHVlKHByb3BzOiBUKTogYW55IHtcbiAgICAgICAgY29uc3QgZm9ybUtleSA9IHRoaXMuY29udGV4dD8uZm9ybUtleTtcbiAgICAgICAgaWYgKGZvcm1LZXkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQ/LnN0YXRlW2Zvcm1LZXldW3RoaXMucHJvcHMubmFtZV0gfHwgZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dD8uc3RhdGVbdGhpcy5wcm9wcy5uYW1lXSB8fCBmYWxzZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdmFsaWRhdGUoKTogQXJyYXk8SVZhbGlkYXRpb24+IHtcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5nZXRGaWVsZFZhbHVlKHRoaXMucHJvcHMpO1xuICAgICAgICAvLyBDYXJyeSBvdXQgdGhlIHZhbGlkYXRpb25cbiAgICAgICAgbGV0IHZhbGlkYXRpb24gPSB0aGlzLmRvVmFsaWRhdGlvbih2YWx1ZSk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgbWV0YWRhdGEgdHlwZSBzdGF0ZVxuICAgICAgICB0aGlzLm1ldGFkYXRhLnVwZGF0ZSh7IHZhbHVlLCBwYXJlbnROYW1lOiB0aGlzLnBhcmVudE5hbWUsIG5hbWU6IHRoaXMucHJvcHMubmFtZX0gYXMgVHlwZU1ldGFkYXRhUmFkaW9Hcm91cFZhbHVlLCB2YWxpZGF0aW9uKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRpb247XG4gICAgfVxuXG59XG4iLCJpbXBvcnQge2RlZmF1bHQgYXMgUmVhY3R9IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQge19nZW5lcmljRm9ybUdyb3VwLCBBYnN0cmFjdEZpZWxkLCBJQWJzdHJhY3RGaWVsZH0gZnJvbSBcIi4vX0Fic3RyYWN0RmllbGRcIjtcbmltcG9ydCB7RklFTERfTkFNRVMsIElGaWVsZCwgSUZpZWxkQmFzZSwgSVNlbGVjdEZpZWxkLCBUeXBlU2VsZWN0Q3NzU2l6ZU5hbWV9IGZyb20gXCIuLi9lbGVtZW50c1wiO1xuXG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBTZWxlY3RGaWVsZDxUIGV4dGVuZHMgSUZpZWxkQmFzZSAmIElTZWxlY3RGaWVsZD4gZXh0ZW5kcyBBYnN0cmFjdEZpZWxkPFQ+IGltcGxlbWVudHMgSUFic3RyYWN0RmllbGQ8VD4ge1xuXG4gICAgY29uc3RydWN0b3IodHlwZTogRklFTERfTkFNRVMsIHByb3BzOiBUKSB7XG4gICAgICAgIHN1cGVyKHByb3BzLCB0eXBlKTtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgIH1cblxuICAgIHB1YmxpYyBjcmVhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUZpZWxkKHRoaXMuZ2V0RmllbGQoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGZvcm1Hcm91cChjaGlsZHJlbjogYW55KTogUmVhY3QuUmVhY3RFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIF9nZW5lcmljRm9ybUdyb3VwPFQ+KHRoaXMucHJvcHMsIGNoaWxkcmVuKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRPcHRpb25zKG9wdGlvbnM6IEFycmF5PGFueT4gPSBbXSkge1xuICAgICAgICBpZih0aGlzLnByb3BzLm9iamVjdEtleSAmJiB0aGlzLnByb3BzLm9iamVjdFZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5tYXAoKG9wdFZhbDogc3RyaW5nLCBpOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gPG9wdGlvbiB2YWx1ZT17b3B0VmFsW3RoaXMucHJvcHMub2JqZWN0S2V5IGFzIGFueV19IGtleT17aX1cbiAgICAgICAgICAgICAgICA+e29wdFZhbFt0aGlzLnByb3BzLm9iamVjdFZhbHVlIGFzIGFueV19PC9vcHRpb24+XG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMubWFwKChvcHRWYWw6IHN0cmluZywgaTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxvcHRpb24gdmFsdWU9e29wdFZhbH0ga2V5PXtpfT57b3B0VmFsfTwvb3B0aW9uPlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGaWVsZCgpIHtcbiAgICAgICAgY29uc3Qge29wdGlvbnMgPSBbXSwgc2l6ZSA9IFwiZGVmYXVsdFwifSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHNlbGVjdERhdGEgPSB0aGlzLl9nZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIHsuLi4odGhpcy5wcm9wcyBhcyBhbnkpfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+ICh0aGlzLmNvbnRleHQgYXMgYW55KS51cGRhdGVQYXJlbnRTdGF0ZShlLCB0aGlzLnByb3BzLm5hbWUpfVxuICAgICAgICAgICAgICAgICAgICBuYW1lPXt0aGlzLnByb3BzLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17QWJzdHJhY3RGaWVsZC5tZXJnZURlZmF1bHRDc3NXaXRoUHJvcHModGhpcy5nZXRTZWxlY3RDc3NOYW1lKCh0aGlzLnByb3BzIGFzIGFueSkuc2l6ZSksIHRoaXMucHJvcHMuY2xhc3NOYW1lLCAodGhpcy5jb250ZXh0IGFzIGFueSkuYmFyZSl9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7c2VsZWN0RGF0YSA/IHNlbGVjdERhdGE6IG51bGx9XG4gICAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRTZWxlY3RDc3NOYW1lKG5hbWU6IFR5cGVTZWxlY3RDc3NTaXplTmFtZSkge1xuICAgICAgICBpZihuYW1lID09PSBcImRlZmF1bHRcIikge1xuICAgICAgICAgICAgcmV0dXJuIFwiZm9ybS1jb250cm9sXCJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBgZm9ybS1jb250cm9sIGZvcm0tY29udHJvbC0ke25hbWV9YDtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7ZGVmYXVsdCBhcyBSZWFjdCwgUmVhY3RFbGVtZW50fSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7X2dlbmVyaWNGb3JtR3JvdXAsIEFic3RyYWN0RmllbGQsIElBYnN0cmFjdEZpZWxkfSBmcm9tIFwiLi9fQWJzdHJhY3RGaWVsZFwiO1xuaW1wb3J0IHtGSUVMRF9OQU1FUywgSUZpZWxkLCBJVGV4dEFyZWFGaWVsZH0gZnJvbSBcIi4uL2VsZW1lbnRzXCI7XG5pbXBvcnQge0lGb3JtQ29udGV4dH0gZnJvbSBcIi4uL2Zvcm1cIjtcbmltcG9ydCB7bWVyZ2VEZWZhdWx0Q3NzV2l0aFByb3BzfSBmcm9tIFwiLi4vY29yZS9pbmRleFwiO1xuXG4vKiogQGludGVybmFsICovXG5leHBvcnQgY2xhc3MgVGV4dEFyZWFGaWVsZDxUIGV4dGVuZHMgSVRleHRBcmVhRmllbGQ+IGV4dGVuZHMgQWJzdHJhY3RGaWVsZDxUPiBpbXBsZW1lbnRzIElBYnN0cmFjdEZpZWxkPFQ+IHtcbiAgICBjb25zdHJ1Y3Rvcih0eXBlOiBGSUVMRF9OQU1FUywgcHJvcHM6IFQgJiBJVGV4dEFyZWFGaWVsZCkge1xuICAgICAgICBzdXBlcihwcm9wcywgdHlwZSk7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgICB9XG5cbiAgICBwdWJsaWMgY3JlYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVGaWVsZCh0aGlzLmdldEZpZWxkKCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBmb3JtR3JvdXAoY2hpbGRyZW46IGFueSk6IFJlYWN0RWxlbWVudCB7XG4gICAgICAgIHJldHVybiBfZ2VuZXJpY0Zvcm1Hcm91cDxUPih0aGlzLnByb3BzLCBjaGlsZHJlbik7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZpZWxkKCkge1xuICAgICAgICBjb25zdCB7cm93cyA9IDV9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e21lcmdlRGVmYXVsdENzc1dpdGhQcm9wcyhcImZvcm0tY29udHJvbFwiLCB0aGlzLnByb3BzLmNsYXNzTmFtZSwgKHRoaXMuY29udGV4dCBhcyBhbnkpLmJhcmUpfVxuICAgICAgICAgICAgICAgICAgICByb3dzPXtyb3dzfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5nZXRTdGF0ZVBvc2l0aW9uRnJvbUZvcm1LZXkoKVt0aGlzLnByb3BzLm5hbWVdIHx8IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gKHRoaXMuY29udGV4dCBhcyBhbnkpLnVwZGF0ZVBhcmVudFN0YXRlKGUsIHRoaXMucHJvcHMubmFtZSl9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9e3RoaXMucHJvcHMubmFtZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQge01FVEFEQVRBX05BTUVTLCBUeXBlRmllbGRWYWx1ZVR5cGVzfSBmcm9tIFwiLi4vZm9ybVwiO1xuaW1wb3J0IHtGSUVMRF9OQU1FU30gZnJvbSBcIi4uL2VsZW1lbnRzXCI7XG5cblxuXG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VEZWZhdWx0Q3NzV2l0aFByb3BzKGRlZmF1bHRWYWx1ZTogc3RyaW5nLCBjc3NQcm9wczogYW55LCBiYXJlOiBib29sZWFuKTogc3RyaW5nIHtcbiAgICBsZXQgY3NzU3RyID0gXCJcIjtcbiAgICBpZighYmFyZSkge1xuICAgICAgICBjc3NTdHIgKz0gYCR7ZGVmYXVsdFZhbHVlfSBgO1xuICAgIH1cbiAgICBpZiAoY3NzUHJvcHMpIHtcbiAgICAgICAgY3NzU3RyICs9IGAke2Nzc1Byb3BzfWA7XG4gICAgfVxuICAgIHJldHVybiBjc3NTdHI7XG59XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNZXRhZGF0YU5hbWVUeXBlKHR5cGU6IEZJRUxEX05BTUVTKTogTUVUQURBVEFfTkFNRVMge1xuICAgIHN3aXRjaCh0eXBlKSB7XG4gICAgICAgIGNhc2UgRklFTERfTkFNRVMuVEVYVDoge1xuICAgICAgICAgICAgcmV0dXJuIE1FVEFEQVRBX05BTUVTLklOUFVUUztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEZJRUxEX05BTUVTLkVNQUlMOiB7XG4gICAgICAgICAgICByZXR1cm4gTUVUQURBVEFfTkFNRVMuSU5QVVRTO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgRklFTERfTkFNRVMuUEFTU1dPUkQ6IHtcbiAgICAgICAgICAgIHJldHVybiBNRVRBREFUQV9OQU1FUy5JTlBVVFM7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBGSUVMRF9OQU1FUy5URVhUQVJFQToge1xuICAgICAgICAgICAgcmV0dXJuIE1FVEFEQVRBX05BTUVTLklOUFVUUztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEZJRUxEX05BTUVTLlJBRElPOiB7XG4gICAgICAgICAgICByZXR1cm4gTUVUQURBVEFfTkFNRVMuUkFESU9fR1JPVVBTO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgRklFTERfTkFNRVMuQ0hFQ0tCT1g6IHtcbiAgICAgICAgICAgIHJldHVybiBNRVRBREFUQV9OQU1FUy5DSEVDS0JPWEVTO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgRklFTERfTkFNRVMuU0VMRUNUOiB7XG4gICAgICAgICAgICByZXR1cm4gTUVUQURBVEFfTkFNRVMuSU5QVVRTO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgRklFTERfTkFNRVMuRklMRToge1xuICAgICAgICAgICAgcmV0dXJuIE1FVEFEQVRBX05BTUVTLkZJTEVTO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHJldHVybiBNRVRBREFUQV9OQU1FUy5JTlBVVFM7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWVsZFZhbHVlVHlwZSh0eXBlOiBGSUVMRF9OQU1FUyk6IFR5cGVGaWVsZFZhbHVlVHlwZXMge1xuICAgIHN3aXRjaCh0eXBlKSB7XG4gICAgICAgIGNhc2UgRklFTERfTkFNRVMuVEVYVDoge1xuICAgICAgICAgICAgcmV0dXJuIFwidmFsdWVcIjtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEZJRUxEX05BTUVTLkVNQUlMOiB7XG4gICAgICAgICAgICByZXR1cm4gXCJ2YWx1ZVwiO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgRklFTERfTkFNRVMuUEFTU1dPUkQ6IHtcbiAgICAgICAgICAgIHJldHVybiBcInZhbHVlXCI7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBGSUVMRF9OQU1FUy5URVhUQVJFQToge1xuICAgICAgICAgICAgcmV0dXJuIFwidmFsdWVcIjtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEZJRUxEX05BTUVTLkNIRUNLQk9YOiB7XG4gICAgICAgICAgICByZXR1cm4gXCJjaGVja2VkXCI7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBGSUVMRF9OQU1FUy5TRUxFQ1Q6IHtcbiAgICAgICAgICAgIHJldHVybiBcInZhbHVlXCI7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBGSUVMRF9OQU1FUy5GSUxFOiB7XG4gICAgICAgICAgICByZXR1cm4gXCJmaWxlXCI7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBGSUVMRF9OQU1FUy5SQURJTzoge1xuICAgICAgICAgICAgcmV0dXJuIFwiY2hlY2tlZFwiXG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgcmV0dXJuIFwidmFsdWVcIjtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIi8vIEV4cG9ydCBSZWdleCBleHByZXNzaW9ucyBoZXJlXG5cblxuZXhwb3J0IGNvbnN0IEVNQUlMX1JFR0VYID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XG4iLCJpbXBvcnQge2RlZmF1bHQgYXMgUmVhY3QsIHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHt1cGRhdGVSYWRpb0dyb3VwU3RhdGVGcm9tUGFzc2VkSW5Db250ZXh0LCB1cGRhdGVQYXJlbnRTdGF0ZSwgX0ZpZWxkRW1wdHlFcnJvck1zZ30gZnJvbSBcIi4vY29yZVwiO1xuaW1wb3J0IHtJVmFsaWRhdGlvbn0gZnJvbSBcIi4vdmFsaWRhdG9yc1wiO1xuaW1wb3J0IHtcbiAgICBBYnN0cmFjdE1ldGFkYXRhLFxuICAgIE1ldGFkYXRhLFxuICAgIE1ldGFkYXRhRmlsZSxcbiAgICBNZXRhZGF0YUdyb3VwLFxufSBmcm9tIFwiLi9maWVsZF9jbGFzc2VzXCI7XG5pbXBvcnQgeyBfbm9Db250ZXh0RXJyb3IgfSBmcm9tIFwiLi9jb3JlL19lcnJvcnNcIjtcblxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHR5cGUgVHlwZUZpZWxkVmFsdWVUeXBlcyA9IFwidmFsdWVcInxcImNoZWNrZWRcInxcImZpbGVcIjtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUZpZWxkVmFsdWVzIHtcbiAgICBjdXJyZW50VmFsdWU6IGFueTtcbiAgICByZWFkb25seSB0eXBlOiBUeXBlRmllbGRWYWx1ZVR5cGVzO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGludGVyZmFjZSBJRmllbGRWYWxpZGF0aW9uIHtcbiAgICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4gICAgdmFsaWRhdGlvbjogQXJyYXk8SVZhbGlkYXRpb24+O1xuICAgIGZpZWxkVmFsdWVzOiBJRmllbGRWYWx1ZXM7XG4gICAgaXNUb3VjaGVkOiBib29sZWFuO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGludGVyZmFjZSBJSW5wdXRGaWVsZE1ldGFkYXRhIGV4dGVuZHMgSUZpZWxkVmFsaWRhdGlvbiB7fVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGludGVyZmFjZSBJRmlsZU1ldGFEYXRhIGV4dGVuZHMgSUZpZWxkVmFsaWRhdGlvbiB7XG4gICAgcmVhZG9ubHkgcmVmTmFtZTogc3RyaW5nO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGludGVyZmFjZSBJUmFkaW9Hcm91cENoaWxkcmVuIGV4dGVuZHMgSUZpZWxkVmFsaWRhdGlvbiB7fVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGludGVyZmFjZSBJQ2hlY2tCb3hlc01ldGFkYXRhIGV4dGVuZHMgSUZpZWxkVmFsaWRhdGlvbiB7fVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHR5cGUgVHlwZUlucHV0TWV0YWRhdGEgPSBBYnN0cmFjdE1ldGFkYXRhPElJbnB1dEZpZWxkTWV0YWRhdGE+O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHR5cGUgVHlwZUZpbGVNZXRhZGF0YSA9IEFic3RyYWN0TWV0YWRhdGE8SUZpbGVNZXRhRGF0YT47XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdHlwZSBUeXBlUmFkaW9Hcm91cE1ldGFkYXRhID0gQWJzdHJhY3RNZXRhZGF0YTxJUmFkaW9Hcm91cENoaWxkcmVuPjtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB0eXBlIFR5cGVDaGVja2JveGVzTWV0YWRhdGEgPSBBYnN0cmFjdE1ldGFkYXRhPElDaGVja0JveGVzTWV0YWRhdGE+O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHR5cGUgVHlwZUZvcm1NZXRhZGF0YSA9XG4gICAgfCBUeXBlSW5wdXRNZXRhZGF0YVxuICAgIHwgVHlwZVJhZGlvR3JvdXBNZXRhZGF0YVxuICAgIHwgVHlwZUNoZWNrYm94ZXNNZXRhZGF0YVxuICAgIHwgVHlwZUZpbGVNZXRhZGF0YTtcblxuZXhwb3J0IGludGVyZmFjZSBJTWV0YWRhdGEge1xuICAgIHJhZGlvR3JvdXBzOiBUeXBlUmFkaW9Hcm91cE1ldGFkYXRhO1xuICAgIGlucHV0czogVHlwZUlucHV0TWV0YWRhdGE7XG4gICAgZmlsZXM6IFR5cGVJbnB1dE1ldGFkYXRhO1xuICAgIGNoZWNrYm94ZXM6IFR5cGVDaGVja2JveGVzTWV0YWRhdGE7XG5cbn1cbi8qKiBAaW50ZXJuYWwgKiovXG5leHBvcnQgZW51bSBNRVRBREFUQV9OQU1FUyB7XG4gICAgSU5QVVRTID0gXCJpbnB1dHNcIixcbiAgICBSQURJT19HUk9VUFMgPSBcInJhZGlvR3JvdXBzXCIsXG4gICAgRklMRVMgPSBcImZpbGVzXCIsXG4gICAgQ0hFQ0tCT1hFUyA9IFwiY2hlY2tib3hlc1wiLFxufVxuLyoqXG4gKiBAaW50ZXJmYWNlICoqSUZvcm0qKiBFeHBvcnRlZCBGb3JtIGludGVyZmFjZSBhdmFpbGFibGUgdG8gdGhlIGNhbGxlci4gQ29udGFpbnMgYWxsIHRoZSBwcm9wZXJ0aWVzIHJlcXVpcmVkIGJ5XG4gKiB0aGUgRm9ybSAqUkJGKiBGb3JtJ3MgY29tcG9uZW50LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElGb3JtIGV4dGVuZHMgUmVhY3QuRm9ybUhUTUxBdHRyaWJ1dGVzPEhUTUxGb3JtRWxlbWVudD4ge1xuICAgIC8qKiBUaGUgcGFzc2VkIGluIHN0YXRlIGZyb20gdGhlIHBhcmVudE5hbWUgY29tcG9uZW50ICovXG4gICAgc3RhdGU6IGFueTtcbiAgICAvKiogSWYgdGhlIHBhcmVudE5hbWUgY29tcG9uZW50IGlzIGEgY2xhc3MgY29tcG9uZW50IHRoZW4gdGhlIGNvbnRleHQgbXVzdCBjb250YWluIHRoZSBwYXJlbnROYW1lJ3MgKip0aGlzKioga2V5d29yZC4gKi9cbiAgICBjb250ZXh0PzogYW55O1xuICAgIC8qKiBJZiB0aGUgZm9ybSdzIHN0YXRlIGlzIG5vdCBkaXJlY3RseSBjb250YWluZWQgYXQgcGFyZW50TmFtZSdzIHN0YXRlIHJvb3Qgb2JqZWN0LCB0aGVuIGZvcm1LZXkgbmVlZHMgdG8gcmVwcmVzZW50IHRoZSBrZXkuICovXG4gICAgcmVhZG9ubHkgZm9ybUtleT86IHN0cmluZztcbiAgICAvKiogRGVmYXVsdCBpcyBmYWxzZS4gSWYgc2V0IHRvIHRydWUgdGhlbiB0aGUgZm9ybSBzdGF0ZSB3aWxsIGJlIGRpc3BsYXllZCBqdXN0IGJlbG93IHRoZSBmb3JtIGNvbXBvbmVudCBpbiBgY29kZWAgdGFncy4gKi9cbiAgICByZWFkb25seSBkZWJ1Zz86IGJvb2xlYW47XG4gICAgLyoqIERlZmF1bHQgaXMgVHJ1ZS4gSWYgc2V0IHRvIGZhbHNlLCB0aGUgIHZhbGlkYXRvcnMgd2lsbCBub3QgYmUgY2FsbGVkIHVudGlsIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZC4gKi9cbiAgICByZWFkb25seSBkeW5hbWljPzogYm9vbGVhbjtcbiAgICAvKiogVGhlIHBhc3NlZCB0aHJvdWdoIHByb3BzIHRvIHRoZSBGb3JtIGNvbXBvbmVudCAqL1xuICAgIGNoaWxkcmVuPzogYW55O1xuICAgIC8qKiBEZWZhdWx0IHNldCB0byBmYWxzZS4gSWYgc2V0IHRvIHRydWUgdGhlbiBpdCB3aWxsIG5vdyB1c2UgYm9vdHN0cmFwIHN0eWxpbmcgb3IgYW55IGV4dHJhIGVsZW1lbnRzLiAqL1xuICAgIHJlYWRvbmx5IGJhcmU/OiBib29sZWFuO1xuICAgIC8qKiBDYWxsYmFjayBmdW5jdGlvbiB3aWwgYmUgY2FsbGVkIG9uIGZvcm0gc3VibWlzc2lvbiBpZiBhbGwgdmFsaWRhdG9ycyBwYXNzICovXG4gICAgcmVhZG9ubHkgY2FsbGJhY2s/OiBGdW5jdGlvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRm9ybUNvbnRleHQge1xuICAgIHJlYWRvbmx5IGJhcmU/OiBib29sZWFuO1xuICAgIHJlYWRvbmx5IGRlYnVnPzogYm9vbGVhbjtcbiAgICByZWFkb25seSBkeW5hbWljPzogYm9vbGVhbjtcbiAgICByZWFkb25seSBmb3JtS2V5Pzogc3RyaW5nO1xuICAgIG1ldGFkYXRhOiBJTWV0YWRhdGE7XG4gICAgc3RhdGU6IGFueTtcbiAgICB1cGRhdGVQYXJlbnRTdGF0ZT86IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxhbnk+LCBuYW1lOiBzdHJpbmcsIGZvcm1LZXk/OiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgdXBkYXRlUmFkaW9Hcm91cFN0YXRlRnJvbVBhc3NlZEluQ29udGV4dD86IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxhbnk+LCBuYW1lOiBzdHJpbmcsIHJhZGlvR3JvdXA6IGFueSwgZm9ybUtleT86IHN0cmluZykgPT4gdm9pZDtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IElOUFVUU19TVEFURTogVHlwZUlucHV0TWV0YWRhdGEgPSB7fSBhcyBhbnk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBSQURJT19HUk9VUFNfU1RBVEU6IFR5cGVSYWRpb0dyb3VwTWV0YWRhdGEgPSB7fSBhcyBhbnk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBGSUxFU19TVEFURTogVHlwZUZpbGVNZXRhZGF0YSA9IHt9IGFzIGFueTtcbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0IENIRUNLQk9YRVNfU1RBVEU6IFR5cGVDaGVja2JveGVzTWV0YWRhdGEgPSB7fSBhcyBhbnk7XG4vKiogQGludGVybmFsICovXG5jb25zdCBwcm92aWRlckNvbnRleHQ6IElGb3JtQ29udGV4dCA9IHtcbiAgICBiYXJlOiBmYWxzZSxcbiAgICBzdGF0ZToge30sXG4gICAgZm9ybUtleTogbnVsbCBhcyBhbnksXG4gICAgZGVidWc6IGZhbHNlLFxuICAgIGR5bmFtaWM6IHRydWUsXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgICAgaW5wdXRzOiBudWxsIGFzIGFueSxcbiAgICAgICAgcmFkaW9Hcm91cHM6IG51bGwgYXMgYW55LFxuICAgICAgICBmaWxlczogbnVsbCBhcyBhbnksXG4gICAgICAgIGNoZWNrYm94ZXM6IG51bGwgYXMgYW55LFxuICAgIH0sXG59O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGludGVyZmFjZSBJUmFkaW9Hcm91cFBhcmVudENvbnRleHQge1xuICAgIHBhcmVudD86IHsgbmFtZTogc3RyaW5nIH07XG4gICAgY2hpbGRyZW4/OiBhbnk7XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgY29uc3QgUmFkaW9Hcm91cENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PFR5cGVSYWRpb0dyb3VwTWV0YWRhdGE+KFJBRElPX0dST1VQU19TVEFURSk7XG4vKiogQGludGVybmFsICovXG5leHBvcnQgY29uc3QgRm9ybUNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PElGb3JtQ29udGV4dD4ocHJvdmlkZXJDb250ZXh0KTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjb25zdCBGb3JtUHJvdmlkZXIgPSBGb3JtQ29udGV4dC5Qcm92aWRlcjtcbi8qKlxuICogQHZhciBBY2Nlc3MgdGhlIGZvcm0gc3RhdGUgd2l0aGluIGEgUmVhY3QgQ29udGV4dCBBcGkgQ29uc3VtZXIgc2NvcGVcbiAqIEBleGFtcGxlIEZvciBleGFtcGxlOlxuICogYGBgXG4gKiA8Rm9ybSBzdGF0ZT17dGhpcy5zdGF0ZX0gY29udGV4dD17dGhpc30+XG4gKiAgICAgIDxGb3JtQ29uc3VtZXI+XG4gKiAgICAgIHsoe3N0YXRlfSkgPT4ge1xuICogICAgICAgICAgcmV0dXJuIDxkaXY+e3N0YXRlfSBpcyBlcXVhbCB7bXlTdGF0ZX08L2Rpdj47XG4gKiAgICAgIH19XG4gKiAgICA8L0Zvcm1Db25zdW1lcj5cbiAqIDwvRm9ybT5cbiAqIGBgYFxuICogKi9cbmV4cG9ydCBjb25zdCBGb3JtQ29uc3VtZXIgPSBGb3JtQ29udGV4dC5Db25zdW1lcjtcblxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNvbnN0IGhhbmRsZVN1Ym1pdCA9IChwcm9wczogSUZvcm0pID0+XG4gICAgKGU6IFJlYWN0LkNoYW5nZUV2ZW50PGFueT4pID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCB7IGNhbGxiYWNrLCB9ID0gcHJvcHM7XG4gICAgICAgIGlmKHR5cGVvZiBjYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiICYmIGNhbGxiYWNrKCkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUT0RPIHRocm93IGVycm9yXG4gICAgICAgIH1cbiAgICB9O1xuXG4vKipcbiAqIFRoZSBtYWluIEZvcm0gY29tcG9uZW50IHRoYXQgaXMgcmVxdWlyZWQgdG8gd3JhcCBhbGwgKlJCRiogY29tcG9uZW50cy5cbiAqIElmIHRoZSBjb21wb25lbnQgdGhhdCB1c2VzIHRoZSBGb3JtIGNvbXBvbmVudCBpcyBhIGZ1bmN0aW9uYWwgY29tcG9uZW50IHRoZW5cbiAqIG9ubHkgdGhlIHN0YXRlIHByb3BzICYgc3RhdGUgdXBkYXRlIGZ1bmN0aW9uIHJldHVybmVkIGZyb20gdGhlIHVzZVN0YXRlIGhvb2sgYXJlXG4gKiByZXF1aXJlZC4gSWYgeW91IGFyZSBjYWxsaW5nIEZvcm0gY29tcG9uZW50IGZyb20gYSBjbGFzcyBjb21wb25lbnQgdGhlbiB5b3UgbXVzdCBcbiAqIHBhc3MgeW91ciBsb2NhbCBjb250ZXh0IG9yIGB0aGlzYCBrZXl3b3JkIHRvXG4gKiB0aGUgYGNvbnRleHRgIHByb3AuXG4gKiBAcGFyYW0gcHJvcHMge0BsaW5rIElGb3JtfVxuICpcbiAqIEFuIGV4YW1wbGUgdXNpbmcgKlJCRiogRm9ybSBjb21wb25lbnQgaW4gYSBmdW5jdGlvbmFsIGNvbXBvbmVudFxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogLy8gTWluaW1hbCBzZXR1cCBmb3IgYSBSQkYncyBGb3JtIGNvbXBvbmVudFxuICpcbiAqICBjb25zdCBteVN0YXRlID0ge1xuICogICAgICB1c2VybmFtZTogJycsXG4gKiAgfVxuICogIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gUmVhY3QudXNlU3RhdGUoc3RhdGUpO1xuICogIDxGb3JtIHN0YXRlPXtteVN0YXRlfSBjb250ZXh0PXtzZXRTdGF0ZX0+PC9Gb3JtPlxuICogYGBgXG4gKlxuICogVG8gdXNlICpSQkYqIEZvcm0gY29tcG9uZW50IGZyb20gYSBjbGFzcyBjb21wb25lbnQgeW91IG11c3QgcGFzcyBpbiB5b3VyXG4gKiBsb2NhbCBzdGF0ZSBvZiBgdGhpc2Aga2V5d29yZC5cbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqIC8vIE1pbmltYWwgc2V0dXAgZm9yIGEgUkJGJ3MgRm9ybSBjb21wb25lbnQgZm9yIGEgY2xhc3MgY29tcG9uZW50XG4gKlxuICogIHRoaXMuc3RhdGUgPSB7IC8vIGluIHRoZSBjb25zdHJ1Y3RvclxuICogICAgICB1c2VybmFtZTogJycsXG4gKiAgfVxuICpcbiAqICA8Rm9ybSBzdGF0ZT17dGhpcy5zdGF0ZX0gY29udGV4dD17dGhpc30+PC9Gb3JtPlxuICogYGBgXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGNvbnN0IEZvcm0gPSAocHJvcHM6IElGb3JtKSA9PiB7XG4gICAgY29uc3QgW3BhcmVudFN0YXRlLCBzZXRQYXJlbnRTdGF0ZV0gPSB1c2VTdGF0ZShwcm9wcy5zdGF0ZSk7XG4gICAgY29uc3QgW2NvbnRleHQsIF9dID0gdXNlU3RhdGUocHJvdmlkZXJDb250ZXh0KTtcbiAgICBjb25zdCBbaW5wdXRTdGF0ZSwgdXBkYXRlSW5wdXRTdGF0ZV0gPSB1c2VTdGF0ZShJTlBVVFNfU1RBVEUpO1xuICAgIGNvbnN0IFtjaGVja2JveGVzU3RhdGUsIHVwZGF0ZUNoZWNrYm94ZXNTdGF0ZV0gPSB1c2VTdGF0ZShDSEVDS0JPWEVTX1NUQVRFKTtcbiAgICBjb25zdCBbZmlsZVN0YXRlLCB1cGRhdGVGaWxlU3RhdGVdID0gdXNlU3RhdGUoRklMRVNfU1RBVEUpO1xuICAgIGNvbnN0IFtyYWRpb1N0YXRlLCB1cGRhdGVSYWRpb1N0YXRlXSA9IHVzZVN0YXRlKFJBRElPX0dST1VQU19TVEFURSk7XG4gICAgLy8gSWYgdGhlIHBhcmVudE5hbWUgY29tcG9uZW50IGlzIGEgY2xhc3MgY29tcG9uZW50LCB0aGVuIHRoZSBzdGF0ZSBuZWVkcyB0byBiZSB1cGRhdGVkIGZyb20gdGhlIHBhcmVudE5hbWUgY29udGV4dFxuICAgIC8vIEZ1bmN0aW9ucyBjb21wb25lbnQgbXVzdCB1c2UgdXNlU3RhdGUgaG9vay4gU2VlIGh0dHBzOi8vam9lZ2FzZXdpY3ouZ2l0aHViLmlvL3JlYWN0LWJhcmUtZm9ybXMvbW9kdWxlcy9fZm9ybV8uaHRtbFxuICAgIGlmKHByb3BzLmNvbnRleHQgJiYgXCJzZXRTdGF0ZVwiIGluIHByb3BzLmNvbnRleHQpIHtcbiAgICAgICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICAgIHByb3BzLmNvbnRleHQuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIC4uLnBhcmVudFN0YXRlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIFtwYXJlbnRTdGF0ZV0pO1xuICAgIH0gZWxzZSBpZiAocHJvcHMuY29udGV4dCkge1xuICAgICAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgcHJvcHMuY29udGV4dCh7XG4gICAgICAgICAgICAgICAgLi4ucGFyZW50U3RhdGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgW3BhcmVudFN0YXRlXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IF9GaWVsZEVtcHR5RXJyb3JNc2coX25vQ29udGV4dEVycm9yKTtcbiAgICB9XG4gICAgLy8gU3RhdGUgSG9va3NcbiAgICBjb25zdCBfcHJvdmlkZXJDb250ZXh0OiBJRm9ybUNvbnRleHQgPSB7XG4gICAgICAgIGJhcmU6IHByb3BzLmJhcmUgfHwgY29udGV4dC5iYXJlLFxuICAgICAgICBzdGF0ZTogcHJvcHMuc3RhdGUsXG4gICAgICAgIGZvcm1LZXk6IHByb3BzLmZvcm1LZXksXG4gICAgICAgIGRlYnVnOiBwcm9wcy5kZWJ1ZyB8fCBjb250ZXh0LmRlYnVnLFxuICAgICAgICBkeW5hbWljOiBwcm9wcy5keW5hbWljIHx8IGNvbnRleHQuZHluYW1pYyxcbiAgICAgICAgdXBkYXRlUGFyZW50U3RhdGU6IHVwZGF0ZVBhcmVudFN0YXRlKHBhcmVudFN0YXRlLCBzZXRQYXJlbnRTdGF0ZSwgcHJvcHMuZm9ybUtleSksXG4gICAgICAgIHVwZGF0ZVJhZGlvR3JvdXBTdGF0ZUZyb21QYXNzZWRJbkNvbnRleHQ6IHVwZGF0ZVJhZGlvR3JvdXBTdGF0ZUZyb21QYXNzZWRJbkNvbnRleHQocGFyZW50U3RhdGUsIHNldFBhcmVudFN0YXRlLCBwcm9wcy5mb3JtS2V5KSxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgIFtNRVRBREFUQV9OQU1FUy5JTlBVVFNdOiBuZXcgTWV0YWRhdGE8SUlucHV0RmllbGRNZXRhZGF0YT4oXG4gICAgICAgICAgICAgICAgaW5wdXRTdGF0ZSBhcyB7fSxcbiAgICAgICAgICAgICAgICB1cGRhdGVJbnB1dFN0YXRlLFxuICAgICAgICAgICAgICAgIE1FVEFEQVRBX05BTUVTLklOUFVUUyxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBbTUVUQURBVEFfTkFNRVMuQ0hFQ0tCT1hFU106IG5ldyBNZXRhZGF0YTxJQ2hlY2tCb3hlc01ldGFkYXRhPihcbiAgICAgICAgICAgICAgICBjaGVja2JveGVzU3RhdGUgYXMge30sXG4gICAgICAgICAgICAgICAgdXBkYXRlQ2hlY2tib3hlc1N0YXRlLFxuICAgICAgICAgICAgICAgIE1FVEFEQVRBX05BTUVTLkNIRUNLQk9YRVMsXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgW01FVEFEQVRBX05BTUVTLkZJTEVTXTogbmV3IE1ldGFkYXRhRmlsZTxJRmlsZU1ldGFEYXRhPihcbiAgICAgICAgICAgICAgICBmaWxlU3RhdGUgYXMge30sXG4gICAgICAgICAgICAgICAgdXBkYXRlRmlsZVN0YXRlLFxuICAgICAgICAgICAgICAgIE1FVEFEQVRBX05BTUVTLkZJTEVTLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIFtNRVRBREFUQV9OQU1FUy5SQURJT19HUk9VUFNdOiBuZXcgTWV0YWRhdGFHcm91cDxJUmFkaW9Hcm91cENoaWxkcmVuPihcbiAgICAgICAgICAgICAgICByYWRpb1N0YXRlIGFzIGFueSxcbiAgICAgICAgICAgICAgICB1cGRhdGVSYWRpb1N0YXRlLFxuICAgICAgICAgICAgICAgIE1FVEFEQVRBX05BTUVTLlJBRElPX0dST1VQUyxcbiAgICAgICAgICAgICksXG4gICAgICAgIH0sXG4gICAgfTtcbiAgICByZXR1cm4gKFxuICAgICAgICA8Rm9ybVByb3ZpZGVyIHZhbHVlPXtfcHJvdmlkZXJDb250ZXh0fT5cbiAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXQocHJvcHMpfT57cHJvcHMuY2hpbGRyZW59PC9mb3JtPlxuICAgICAgICA8L0Zvcm1Qcm92aWRlcj5cbiAgICApO1xufTtcbiIsImltcG9ydCB7RU1BSUxfUkVHRVh9IGZyb20gXCIuL2NvcmVcIjtcbmltcG9ydCB7SUZvcm1Db250ZXh0fSBmcm9tIFwiLi9mb3JtXCI7XG5pbXBvcnQge0lFbWFpbEZpZWxkLCBJRmllbGQsIElGaWVsZEJhc2UsIElQYXNzd29yZEZpZWxkLCBJVGV4dEFyZWFGaWVsZCwgSVRleHRJbnB1dEZpZWxkfSBmcm9tIFwiLi9lbGVtZW50c1wiO1xuXG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVZhbGlkYXRpb24ge1xuICAgIGlzVmFsaWQ6IGJvb2xlYW47XG4gICAgbWVzc2FnZXM6IFsuLi5zdHJpbmdbXV07XG59XG4vKiogQGludGVybmFsIFRoZSBpbm5lciByZXR1cm5lZCBmdW5jdGlvbiB0eXBlIHRoYXQgY3VzdG9tIHZhbGlkYXRvcnMgbXVzdCBpbXBsZW1lbnQgKi9cbmV4cG9ydCB0eXBlIElWYWxpZGF0aW9uRnVuY3Rpb24gPSAoLi4uYXJnczogQXJyYXk8YW55PikgPT4gSVZhbGlkYXRpb247XG4vKiogQGludGVybmFsIFRoZSBleHBlY3RlZCB2YWxpZGF0b3IncyB0eXBlIHRoYXQge0BsaW5rIElGaWVsZH0gZWxlbWVudHMgY2FuIGNvbnN1bWUgKi9cbmV4cG9ydCB0eXBlIElWYWxpZGF0b3JzID0gQXJyYXk8SVZhbGlkYXRpb25GdW5jdGlvbj47XG4vKiogQGludGVybmFsIFRoZSBjdXN0b20gdmFsaWRhdG9yIHR5cGUgY2FsbGJhY2sgKi9cbmV4cG9ydCB0eXBlIElDdXN0b21WYWxpZGF0b3JDYWxsYmFjayA9IChhcmc6IGFueSwgZmllbGRWYWx1ZTogYW55LCBjb250ZXh0OiBJRm9ybUNvbnRleHQpID0+IEFycmF5PHN0cmluZz58dW5kZWZpbmVkO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHR5cGUgSVZhbGlkYXRpb25WYXJpYWJsZSA9IChhcmc/OiBhbnkpID0+IElWYWxpZGF0aW9uRnVuY3Rpb247XG4vKipcbiAqIFRoZSBgcGFzc3dvcmRLZXlgIGlzIG5vcm1hbGx5IHRoZSBmaXJzdCBwYXNzd29yZCBmb3JtIGZpZWxkIHRoZSB1c2VyIGZpbGxzIGluIGJlZm9yZVxuICogdGhlbiBjb25maXJtaW5nIHRoYXQgdGhlIHBhc3N3b3JkIGlzIGNvcnJlY3Qgd2l0aCBhIGNvbmZpcm0gcGFzc3dvcmQgZmllbGQuIHRoaXMgdmFsaWRhdG9yXG4gKiBjaGVjayB0aGF0IGJvdGggcGFzc3dvcmQgZmllbGRzIGFyZSBlcXVhbCBvciBlbHNlIHdpbGwgcmV0dXJuIGFuIGVycm9yIG1lc3NhZ2UgYW5kIHNldCB0aGlzXG4gKiBmaWVsZCB0byBpbnZhbGlkLmBcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqICA8UGFzc3dvcmRGaWVsZFxuICogICAgICAvLyBvdGhlciBwcm9wcy4uLlxuICogICAgICBuYW1lPVwibXlQYXNzd29yZFwiXG4gKiAgLz5cbiAqXG4gKiAgPENvbmZpcm1QYXNzd29yZEZpZWxkXG4gKiAgICAgICAgLy8gb3RoZXIgcHJvcHMuLi5cbiAqICAgICAgICB2YWxpZGF0b3JzPXtbYXJlRmllbGRzRXF1YWwoXCJteVBhc3N3b3JkXCIpXX1cbiAqICAgLz5cbiAqICAgLy8gbWVzc2FnZTogRmllbGRzIGRvIG5vdCBtYXRjaFxuICogYGBgXG4gKiBAcGFyYW0gYHBhc3N3b3JkS2V5YCBUaGUgbmFtZSBvZiB0aGUgcGFzc3dvcmQgZm9ybSBlbGVtZW50IHlvdSB3YXRjaCB0byBtYXRjaCBhZ2FpbnN0XG4gKiBAZnVuY3Rpb25cbiAqL1xuZXhwb3J0IGNvbnN0IGFyZUZpZWxkc0VxdWFsOiBJVmFsaWRhdGlvblZhcmlhYmxlID0gY3VzdG9tVmFsaWRhdG9yKChmaWVsZEtleSwgZmllbGRWYWx1ZSwgY29udGV4dDogSUZvcm1Db250ZXh0KSA9PiB7XG4gICAgbGV0IHRlc3RGaWVsZDogSUZpZWxkQmFzZTtcbiAgICBsZXQgbWVzc2FnZSA9IFtgRmllbGRzIGRvIG5vdCBtYXRjaGBdO1xuICAgIGxldCBjb250ZXh0U3RhdGUgPSBnZXRGb3JtU3RhdGVGcm9tQ29udGV4dChjb250ZXh0KTtcbiAgICBpZihmaWVsZEtleSBpbiBjb250ZXh0U3RhdGUpIHtcbiAgICAgICAgdGVzdEZpZWxkID0gY29udGV4dFN0YXRlW2ZpZWxkS2V5XTtcbiAgICAgICAgaWYoIXRlc3RGaWVsZCB8fCAhZmllbGRWYWx1ZSAgfHwgZmllbGRWYWx1ZSAhPT0gY29udGV4dFN0YXRlW2ZpZWxkS2V5XSkge1xuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgUmVhY3QtQmFyZUZvcm1zIEVycm9yOiBObyBGaWVsZCB3aXRoIG5hbWUgb2YgJHtmaWVsZEtleX0gZXhpc3RzIHdoZW4gY2FsbGluZyAnYXJlRmllbGRzRXF1YWwnIGBcbiAgICAgICAgICAgICsgYHZhbGlkYXRvciBmdW5jdGlvbi5cXG4gRm9yIG1vcmUgaW5mbywgdmlzaXQ6IGBcbiAgICAgICAgICAgICsgYGh0dHBzOi8vam9lZ2FzZXdpY3ouZ2l0aHViLmlvL3JlYWN0LWJhcmUtZm9ybXMvbW9kdWxlcy9fdmFsaWRhdG9yc18uaHRtbCNhcmVmaWVsZHNlcXVhbGAsXG4gICAgICAgICk7XG4gICAgfVxufSk7XG5cblxuLyoqXG4gKiBUaGUgYGlzRmllbGRFbXB0eWAgdmFsaWRhdG9yIHBlcmZvcm1zIGEgY29tcGFyaXNvbiBhZ2FpbnN0IGBtaW5MZW5ndGhgICYgdGhlIGZpZWxkIGVsZW1lbnRcbiAqIHZhbHVlLiBJZiB0aGV5IGFyZSBlcXVhbCBvciB0aGUgYG1pbkxlbmd0aGAgaXMgZ3JlYXRlciB0aGFuIHRoZSBmb3JtIGVsZW1lbnQgdmFsdWUgdGhlblxuICogdGhpcyBlbGVtZW50IGlzIG5vdCB2YWxpZCAmIGEgbWVzc2FnZSBpcyBkaXNwbGF5ZWQuXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHtUZXh0SW5wdXRGaWVsZCwgaXNGaWVsZEVtcHR5fSBmcm9tIFwicmVhY3QtYmFzZS1mb3Jtc1wiXG4gKlxuICogY29uc3Qgc3RhdGUgPSB7IHVzZXJuYW1lOiBcIlwiIH1cbiAqIGBgYFxuICogIDxUZXh0SW5wdXRGaWVsZFxuICogICAgICAgIHZhbHVlPXtzdGF0ZS51c2VybmFtZX1cbiAqICAgICAgICBuYW1lPVwidXNlcm5hbWVcIlxuICogICAgICAgIHZhbGlkYXRvcnM9e1tpc0ZpZWxkRW1wdHkoNSldfVxuICogICAvPlxuICogICAvLyBtZXNzYWdlOiBNdXN0IGJlIGF0IGxlYXN0IDUgY2hhcmFjdGVyc1xuICogYGBgXG4gKiBAcGFyYW0gbWluTGVuZ3RoIFRoZSBtaW5pbXVtIGxlbmd0aCBvZiB0aGUgZm9ybSBmaWVsZCB2YWx1ZVxuICogQGZ1bmN0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBpc0ZpZWxkRW1wdHk6IElWYWxpZGF0aW9uVmFyaWFibGUgPSBjdXN0b21WYWxpZGF0b3IoKG1pbkxlbmd0aCwgZmllbGRWYWx1ZSwgY29udGV4dDogSUZvcm1Db250ZXh0KSA9PiB7XG4gICAgY29uc3QgaXNWYWxpZCA9ICh0eXBlb2YgZmllbGRWYWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBmaWVsZFZhbHVlLmxlbmd0aCA+PSBtaW5MZW5ndGgpO1xuICAgIGlmKCFpc1ZhbGlkKSB7XG4gICAgICAgIHJldHVybiBbYE11c3QgYmUgYXQgbGVhc3QgJHttaW5MZW5ndGh9IGNoYXJhY3RlcnNgXTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBUaGlzIHZhbGlkYXRvciBkb2Vzbid0IHJlcXVpcmUgYW55IGFyZ3VtZW50cyB0byBiZSBwYXNzZWQgaW4uXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHtFbWFpbEZpZWxkLCBpc0VtYWlsVmFsaWR9IGZyb20gXCJyZWFjdC1iYXNlLWZvcm1zXCJcbiAqXG4gKiBjb25zdCBzdGF0ZSA9IHsgdGVybXM6IGZhbHNlIH1cbiAqIGBgYFxuICogIDxFbWFpbEZpZWxkXG4gKiAgICAvLyBvdGhlciBwcm9wcy4uLlxuICogICAgdmFsaWRhdG9ycz17W2lzRW1haWxWYWxpZCgpXX1cbiAqICAvPlxuICogIC8vIG1lc3NhZ2U6IE11c3QgYmUgYSB2YWxpZCBlbWFpbFxuICogYGBgXG4gKlxuICogQGZ1bmN0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBpc0VtYWlsVmFsaWQ6IElWYWxpZGF0aW9uVmFyaWFibGUgPSBjdXN0b21WYWxpZGF0b3IoKF8gLCBmaWVsZFZhbHVlLCBjb250ZXh0KSA9PiB7XG4gICAgY29uc3QgaXNWYWxpZCA9IEVNQUlMX1JFR0VYLnRlc3QoU3RyaW5nKGZpZWxkVmFsdWUpLnRvTG93ZXJDYXNlKCkpO1xuICAgIGlmKCFpc1ZhbGlkKSB7XG4gICAgICAgIHJldHVybiBbYE11c3QgYmUgYSB2YWxpZCBlbWFpbGBdO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFRoaXMgdmFsaWRhdG9yIHdpbGwgZGlzcGxheSB0aGUgd2FybmluZyBpZiBhIHVzZXIgaGFzIHNlbGVjdGVkIGEgZmlsZSBidXQgdGhlbiByZXNlbGVjdGVkXG4gKiBub3RoaW5nIChieSBjbGlja2luZyB0aGUgY2FuY2VsIGJ1dHRvbiBpbiB0aGUgZmlsZSBwb3B1cCB3aW5kb3cpLiBUaGlzIHZhbGlkYXRvciBkb2Vzbid0XG4gKiByZXF1aXJlIGFueSBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIGluLlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogaW1wb3J0IHtjcmVhdGVGaWxlUmVmLCBGaWxlRmllbGQsIGlzRmlsZX0gZnJvbSBcInJlYWN0LWJhcmUtZm9ybXNcIjtcbiAqXG4gKiBjb25zdCBteUZpbGVSZWYgPSBjcmVhdGVGaWxlUmVmKCk7XG4gKlxuICogPEZpbGVGaWVsZFxuICogICAgcmVmPXtteUZpbGVSZWZ9XG4gKiAgICBoaW50PVwiTXVzdCBiZSBhIGZpbGVcIlxuICogICAgbGFiZWxUZXh0PVwiVXBsb2FkIHlvdXIgZmlsZVwiXG4gKiAgICBuYW1lPVwibXlGaWxlVGVzdFwiXG4gKiAgICB2YWxpZGF0b3JzPXtbaXNGaWxlKCldfVxuICogLz5cbiAqIGBgYFxuICpcbiAqIEBmdW5jdGlvblxuICovXG5leHBvcnQgY29uc3QgaXNGaWxlOiBJVmFsaWRhdGlvblZhcmlhYmxlID0gY3VzdG9tVmFsaWRhdG9yKChfLCBuYW1lLCBjb250ZXh0KSA9PiB7XG4gICAgaWYoIW5hbWUpIHtcbiAgICAgICAgcmV0dXJuIFtgTXVzdCBiZSBhIGZpbGUgdHlwZWBdO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFRvIHVzZSB0aGUgYGlzUmFkaW9DaGVja2VkYCwgc2VsZWN0IHRoZSBgUmFkaW9GaWVsZGAgY29tcG9uZW50IHlvdSB3aXNoIHRoZSB1c2VyIHRvIHNlbGVjdFxuICogJiBhZGQgdGhlIHZhbGlkYXRvciBmdW5jdGlvbiB0byB0aGUgYHZhbGlkYXRvcnNgIHByb3AuIFRoaXMgd2lsbCBub3cgZGlzcGxheSBhIHdhcm5pbmcgaWZcbiAqIHRoZSB1c2VyIGhhcyBkZXNlbGVjdGVkIHRoZSByZXF1aXJlZCBvcHRpb24uIFRoaXMgdmFsaWRhdG9yIGRvZXNuJ3RcbiAqIHJlcXVpcmUgYW55IGFyZ3VtZW50cyB0byBiZSBwYXNzZWQgaW4uXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHtSYWRpb0dyb3VwLCBSYWRpb0ZpZWxkfSBmcm9tIFwicmVhY3QtYmFzZS1mb3Jtc1wiXG4gKlxuICogY29uc3Qgc3RhdGUgPSB7IG1hbGU6IHRydWUsIGZlbWFsZTogZmFsc2UgfVxuICpcbiAqIDxSYWRpb0dyb3VwIG5hbWU9XCJncm91cDFcIj5cbiAqICAgICA8UmFkaW9GaWVsZFxuICogICAgICAgbmFtZT1cIm1hbGVcIlxuICogICAgICAgY2hlY2tlZD17c3RhdGUuZmVtYWxlfVxuICogICAgICAgdmFsaWRhdG9ycz17W2lzUmFkaW9DaGVja2VkKCldfVxuICogICAgLz5cbiAqICAgIDxSYWRpb0ZpZWxkXG4gKiAgICAgICBuYW1lPVwiZmVtYWxlXCJcbiAqICAgICAgIGNoZWNrZWQ9e3N0YXRlLmZlbWFsZX1cbiAqICAgIC8+XG4gKiA8L1JhZGlvR3JvdXA+XG4gKlxuICogQGZ1bmN0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBpc1JhZGlvQ2hlY2tlZDogSVZhbGlkYXRpb25WYXJpYWJsZSA9IGN1c3RvbVZhbGlkYXRvcigoXyAsIHZhbHVlLCBjb250ZXh0KSA9PiB7XG4gICAgaWYoIXZhbHVlKSB7XG4gICAgICAgIHJldHVybiBbYFRoaXMgb3B0aW9uIG11c3QgYmUgc2VsZWN0ZWRgXTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBUaGUgYGlzQ2hlY2tlZGAgdmFsaWRhdG9yIHdpbGwgZGlzcGxheSBhIHdhcm5pbmcgaWYgdGhlIHVzZXIgaGFzIHNlbGVjdGVkIHRoZSBjaGVja2JveCAmXG4gKiB0aGVuIGRlc2VsZWN0ZWQgaXQuIFRoaXMgcmVxdWlyZXMgYSAqYm9vbGVhbiogdHlwZSB0byBiZSBzZXQgaW4geW91ciBzdGF0ZSwgc2VlIGJlbG93LlxuICogVGhpcyB2YWxpZGF0b3IgZG9lc24ndCByZXF1aXJlIGFueSBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIGluLlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7Q2hlY2tCb3hGaWVsZCwgaXNDaGVja2VkfSBmcm9tIFwicmVhY3QtYmFzZS1mb3Jtc1wiXG4gKlxuICogY29uc3Qgc3RhdGUgPSB7IHRlcm1zOiBmYWxzZSB9XG4gKlxuICogPENoZWNrQm94RmllbGRcbiAqICAgIG5hbWU9XCJ0ZXJtc1wiXG4gKiAgICBjaGVja2VkPXt0aGlzLnN0YXRlLnRlcm1zfVxuICogICAgdmFsaWRhdG9ycz17W2lzQ2hlY2tlZCgpXX1cbiAqIC8+XG4gKlxuICogQGZ1bmN0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBpc0NoZWNrZWQ6IElWYWxpZGF0aW9uVmFyaWFibGUgPSBjdXN0b21WYWxpZGF0b3IoKF8sIGZpZWxkVmFsdWUsIGNvbnRleHQpID0+IHtcbiAgICBpZihmaWVsZFZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gW2BNdXN0IGJlIGNoZWNrZWRgXTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBGdW5jdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2sgd2hpY2ggY29udGFpbnMgdGhlIGNhbGxlcnMgb3duIHZhbGlkYXRpb24gbG9naWNcbiAqICYgcmV0dXJucyBhbiBhcnJheSBvZiBzdHJpbmcocykgd2hpY2ggYXJlIHRoZSB2YWxpZGF0aW9uIGVycm9yIG1lc3NhZ2Ugb3IgKnVuZGVmaW5lZCouIEJlbG93IGlzIGFuXG4gKiBleGFtcGxlIG9mIGNyZWF0aW5nIGEgY3VzdG9tIHZhbGlkYXRvciB0byB0ZXN0IGlmIGEgZmllbGQgaGFzIGEgc3RyaW5nIGxlbmd0aCBvZiBudGguXG4gKlxuICogVGhlcmUgYXJlIDMgYXJndW1lbnRzIGF2YWlsYWJsZSB0byB5b3VyIGN1c3RvbSB2YWxpZGF0aW9uIGNhbGxiYWNrOlxuICogIC0gKiphcmcqKiBUaGlzIGlzIHRoZSB5b3VyIG93biB2YWx1ZSB1c2VkIHRvIGluIHRoZSB2YWxpZGF0aW9uIGNvbXBhcmlzb25cbiAqICBAZXhhbXBsZVxuICogIGBgYFxuICogIGNvbnN0IG15QXJnID0gNTtgXG4gKlxuICogIDxUZXh0SW5wdXRGaWVsZFxuICogICAgLy8gb3RoZXIgcHJvcHMuLi5cbiAqICAgIHZhbGlkYXRvcnM9e1tteVZhbGlkYXRvcihteUFyZyldfSAvLyA8LSBgbXlBcmdgXG4gKiAgLz5cbiAqIGBgYFxuICogIC0gKipmaWVsZFZhbHVlKiogVGhpcyBpcyB0aGUgY3VycmVudCBmb3JtIGVsZW1lbnQgdmFsdWUgYmVpbmcgcGFzc2VkIHRvIHRoZSB2YWxpZGF0b3JcbiAqICAtICoqY29udGV4dCoqIFRoaXMgaXMgdGhlIGNvbnRleHQgb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIHN0YXRlXG4gKiBGb3IgZXhhbXBsZTpcbiAqIEBleGFtcGxlXG4gKiBgYGBgXG4gKiBjb25zdCBpc0ZpZWxkRW1wdHkgPSBjcmVhdGVWYWxpZGF0b3IoKG1pbkxlbmd0aCwgZmllbGRWYWx1ZSwgY29udGV4dCkgPT4ge1xuICogICAgIGNvbnN0IGlzVmFsaWQgPSAoZmllbGRWYWx1ZS5sZW5ndGggPj0gbWluTGVuZ3RoKTtcbiAqICAgICBpZighaXNWYWxpZCkge1xuICogICAgICAgICByZXR1cm4gW2BNdXN0IGJlIGF0IGxlYXN0ICR7bWluTGVuZ3RofSBjaGFyYWN0ZXJzYF07XG4gKiAgICAgfVxuICogfSk7XG4gKiBgYGBgXG4gKiBZb3Ugb25seSBuZWVkIHRvIHJldHVybiB0eXBlIGFuIGFycmF5IG9mIHN0cmluZyhzKSAod2hpY2ggaXMgeW91ciB2YWxpZGF0aW9uIG1lc3NhZ2UpXG4gKiBpZiB0aGUgYGZpZWxkVmFsdWVgaXMgKipOT1QqKiB2YWxpZGF0ZWQuXG4gKiBAcGFyYW0gY2FsbGJhY2tcbiAqIEBmdW5jdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY3VzdG9tVmFsaWRhdG9yKGNhbGxiYWNrOiBJQ3VzdG9tVmFsaWRhdG9yQ2FsbGJhY2spOiAoYXJnOiBhbnkpID0+IElWYWxpZGF0aW9uRnVuY3Rpb24gIHtcbiAgICByZXR1cm4gKGFyZzogYW55ID0gbnVsbCk6IElWYWxpZGF0aW9uRnVuY3Rpb24gPT4ge1xuICAgICAgICByZXR1cm4gKC4uLmFyZ3M6IEFycmF5PGFueT4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8gY3VzdG9tIGV4Y2VwdGlvbnMgZm9yIHRoZSBiZWxvdyBhcmdzXG4gICAgICAgICAgICBjb25zdCBmaWVsZFZhbHVlOiBhbnkgPSBhcmdzWzBdO1xuICAgICAgICAgICAgY29uc3QgY29udGV4dDogSUZvcm1Db250ZXh0ID0gYXJnc1sxXTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gY2FsbGJhY2soYXJnLCBmaWVsZFZhbHVlLCBjb250ZXh0KTtcbiAgICAgICAgICAgIGxldCB2YWxpZGF0aW9uRGF0YTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG1lc3NhZ2VzKSAmJiBtZXNzYWdlcy5sZW5ndGggPj0gMSkge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25EYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXMsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaXNWYWxpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXM6IFtdLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uRGF0YTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGNvcnJlY3Qgc3RhdGUgZnJvbSB0aGUgY29udGV4dCBvYmplY3Qgd2l0aGluIGEgdmFsaWRhdG9yOlxuICogIC0gKiphcmcqKiBjb250ZXh0IHtJRm9ybUNvbnRleHR9XG4gKiAgQGV4YW1wbGVcbiAqICBgYGBcbiAqICBsZXQgY29udGV4dFN0YXRlID0gZ2V0Rm9ybVN0YXRlRnJvbUNvbnRleHQoY29udGV4dCk7XG4gKiBgYGBcbiAqIEBwYXJhbSBjb250ZXh0XG4gKiBAZnVuY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZvcm1TdGF0ZUZyb21Db250ZXh0KGNvbnRleHQ6IElGb3JtQ29udGV4dCkge1xuICAgIGlmKGNvbnRleHQuZm9ybUtleSkge1xuICAgICAgICByZXR1cm4gY29udGV4dC5zdGF0ZVtjb250ZXh0LmZvcm1LZXldO1xuICAgIH1cbiAgICByZXR1cm4gY29udGV4dC5zdGF0ZTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=